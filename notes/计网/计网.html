<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="https://NEWWORLDCCX.github.io/myblogs/notes/%E8%AE%A1%E7%BD%91/%E8%AE%A1%E7%BD%91.html" rel="canonical"/>
<link href="../crypto/crypto.html" rel="prev"/>
<link href="../OS/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F.html" rel="next"/>
<link href="../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.0, mkdocs-material-9.5.26" name="generator"/>
<title>计网 - My Blogs</title>
<link href="../../assets/stylesheets/main.6543a935.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CCascadia:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Cascadia"}</style>
<link href="../../css/heti.css" rel="stylesheet"/>
<link href="../../format_more/stylesheets/extra.css" rel="stylesheet"/>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#_1">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="My Blogs" class="md-header__button md-logo" data-md-component="logo" href="../../index.html" title="My Blogs">
<img alt="logo" src="../../images/logo.png"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            My Blogs
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              计网
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="indigo" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"></path></svg>
</label>
</form>
<script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/NEWWORLDCCX/myblogs" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    Website-git
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../index.html">
        
  
    
  
  Welcome

      </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="../note.html">
          
  
  Notes

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../blogs/index.html">
          
  
  Blogs

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../about/About.html">
        
  
    
  
  About

      </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="My Blogs" class="md-nav__button md-logo" data-md-component="logo" href="../../index.html" title="My Blogs">
<img alt="logo" src="../../images/logo.png"/>
</a>
    My Blogs
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/NEWWORLDCCX/myblogs" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    Website-git
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../index.html">
<span class="md-ellipsis">
    Welcome
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
<span class="md-ellipsis">
    Notes
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            Notes
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../note.html">
<span class="md-ellipsis">
    note
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
<span class="md-ellipsis">
    大二春夏
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_2">
<span class="md-nav__icon md-icon"></span>
            大二春夏
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../crypto/crypto.html">
<span class="md-ellipsis">
    密码学
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
<span class="md-ellipsis">
    大三秋冬
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_2_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_3">
<span class="md-nav__icon md-icon"></span>
            大三秋冬
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    计网
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="%E8%AE%A1%E7%BD%91.html">
<span class="md-ellipsis">
    计网
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#introduction">
<span class="md-ellipsis">
      Introduction
    </span>
</a>
<nav aria-label="Introduction" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#network-hardware">
<span class="md-ellipsis">
      Network Hardware
    </span>
</a>
<nav aria-label="Network Hardware" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_2">
<span class="md-ellipsis">
      按照传输技术分
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_3">
<span class="md-ellipsis">
      按照规模分
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#communication-links">
<span class="md-ellipsis">
      Communication Links
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pan">
<span class="md-ellipsis">
      PAN
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#lan">
<span class="md-ellipsis">
      LAN
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_4">
<span class="md-ellipsis">
      其他网络
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_5">
<span class="md-ellipsis">
      网络举例
    </span>
</a>
<nav aria-label="网络举例" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_6">
<span class="md-ellipsis">
      移动网络
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#frequency-reuse">
<span class="md-ellipsis">
      Frequency Reuse
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#switching">
<span class="md-ellipsis">
      Switching
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#wlan">
<span class="md-ellipsis">
      WLAN
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_7">
<span class="md-ellipsis">
      网络协议
    </span>
</a>
<nav aria-label="网络协议" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_8">
<span class="md-ellipsis">
      设计目标
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_9">
<span class="md-ellipsis">
      协议层级
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_10">
<span class="md-ellipsis">
      参考模型
    </span>
</a>
<nav aria-label="参考模型" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#osi">
<span class="md-ellipsis">
      OSI
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#tcp-ip">
<span class="md-ellipsis">
      TCP / IP
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#metric-units">
<span class="md-ellipsis">
      Metric Units
    </span>
</a>
<nav aria-label="Metric Units" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_11">
<span class="md-ellipsis">
      网络延迟 / 损失 / 吞吐
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#physical-layer">
<span class="md-ellipsis">
      Physical Layer
    </span>
</a>
<nav aria-label="Physical Layer" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_12">
<span class="md-ellipsis">
      理论基础
    </span>
</a>
<nav aria-label="理论基础" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_13">
<span class="md-ellipsis">
      傅里叶级数
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#bandwidth-limited-signals">
<span class="md-ellipsis">
      Bandwidth-limited Signals
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-maximum-data-rate-of-a-channel">
<span class="md-ellipsis">
      The Maximum Data Rate of a Channel
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#nyquist-bandwidth">
<span class="md-ellipsis">
      Nyquist Bandwidth
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_14">
<span class="md-ellipsis">
      香农
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#transmission-media">
<span class="md-ellipsis">
      Transmission Media
    </span>
</a>
<nav aria-label="Transmission Media" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#guided-or-wired">
<span class="md-ellipsis">
      Guided or Wired
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#wireless">
<span class="md-ellipsis">
      Wireless
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_15">
<span class="md-ellipsis">
      卫星
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#digital-modulation-and-multiplexing">
<span class="md-ellipsis">
      Digital Modulation and Multiplexing
    </span>
</a>
<nav aria-label="Digital Modulation and Multiplexing" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_16">
<span class="md-ellipsis">
      数字调制
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_17">
<span class="md-ellipsis">
      三个通讯例子
    </span>
</a>
<nav aria-label="三个通讯例子" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#pstn">
<span class="md-ellipsis">
      PSTN
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#data-link-layer">
<span class="md-ellipsis">
      Data-link Layer
    </span>
</a>
<nav aria-label="Data-link Layer" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#overview">
<span class="md-ellipsis">
      Overview
    </span>
</a>
<nav aria-label="Overview" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_18">
<span class="md-ellipsis">
      实现位置
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_19">
<span class="md-ellipsis">
      服务
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#framing">
<span class="md-ellipsis">
      Framing
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#errors">
<span class="md-ellipsis">
      Errors
    </span>
</a>
<nav aria-label="Errors" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#error-correcting">
<span class="md-ellipsis">
      Error-Correcting
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#error-detection">
<span class="md-ellipsis">
      Error Detection
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_20">
<span class="md-ellipsis">
      协议
    </span>
</a>
<nav aria-label="协议" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#sliding-window-protocols">
<span class="md-ellipsis">
      Sliding Window Protocols
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#example-data-link-protocols">
<span class="md-ellipsis">
      Example Data Link Protocols
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#mac-sublayer">
<span class="md-ellipsis">
      MAC sublayer
    </span>
</a>
<nav aria-label="MAC sublayer" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#the-channel-allocation-problem">
<span class="md-ellipsis">
      The Channel Allocation Problem
    </span>
</a>
<nav aria-label="The Channel Allocation Problem" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#static-channel-allocation">
<span class="md-ellipsis">
      Static channel allocation
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dynamic-channel-allocation">
<span class="md-ellipsis">
      Dynamic Channel Allocation
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#wireless-lan-protocols">
<span class="md-ellipsis">
      Wireless LAN Protocols
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ethernet">
<span class="md-ellipsis">
      Ethernet
    </span>
</a>
<nav aria-label="Ethernet" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_21">
<span class="md-ellipsis">
      帧结构
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#performance">
<span class="md-ellipsis">
      Performance
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_22">
<span class="md-ellipsis">
      分类
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#80211-wifi">
<span class="md-ellipsis">
      802.11 WiFi
    </span>
</a>
<nav aria-label="802.11 WiFi" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#80211-mac-sublayer-protocol">
<span class="md-ellipsis">
      802.11 MAC Sublayer Protocol
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#data-link-layer-switching">
<span class="md-ellipsis">
      Data Link Layer Switching
    </span>
</a>
<nav aria-label="Data Link Layer Switching" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#physical-lan">
<span class="md-ellipsis">
      physical LAN
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#vlan">
<span class="md-ellipsis">
      VLAN
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#network-layer">
<span class="md-ellipsis">
      Network Layer
    </span>
</a>
<nav aria-label="Network Layer" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#overview_1">
<span class="md-ellipsis">
      Overview
    </span>
</a>
<nav aria-label="Overview" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_23">
<span class="md-ellipsis">
      网络层 / 路由器的功能
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#implementation-of-connectionless-service">
<span class="md-ellipsis">
      Implementation of Connectionless Service
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_24">
<span class="md-ellipsis">
      路由算法
    </span>
</a>
<nav aria-label="路由算法" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#the-link-state-ls-routing-algorithm">
<span class="md-ellipsis">
      the Link-State (LS) Routing Algorithm
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-distance-vector-dv-routing-algorithm">
<span class="md-ellipsis">
      The Distance Vector (DV) Routing Algorithm
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_25">
<span class="md-ellipsis">
      层次路由
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_26">
<span class="md-ellipsis">
      广播路由
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-network-layer-in-the-internet">
<span class="md-ellipsis">
      The network layer in the Internet
    </span>
</a>
<nav aria-label="The network layer in the Internet" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#ip-protocol">
<span class="md-ellipsis">
      IP Protocol
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ip-addressing">
<span class="md-ellipsis">
      IP addressing
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ipv6">
<span class="md-ellipsis">
      IPv6
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#control-protocol">
<span class="md-ellipsis">
      Control Protocol
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#routing-protocol">
<span class="md-ellipsis">
      Routing Protocol
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#transport-layer">
<span class="md-ellipsis">
      Transport Layer
    </span>
</a>
<nav aria-label="Transport Layer" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#overview_2">
<span class="md-ellipsis">
      Overview
    </span>
</a>
<nav aria-label="Overview" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#transport-services">
<span class="md-ellipsis">
      Transport Services
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#udp">
<span class="md-ellipsis">
      UDP
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#rtp">
<span class="md-ellipsis">
      RTP
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#tcp">
<span class="md-ellipsis">
      TCP
    </span>
</a>
<nav aria-label="TCP" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#tcp-service-model">
<span class="md-ellipsis">
      TCP Service Model
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#header">
<span class="md-ellipsis">
      Header
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#connection-establish">
<span class="md-ellipsis">
      connection establish
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../OS/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F.html">
<span class="md-ellipsis">
    操作系统
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../TC/%E8%AE%A1%E7%AE%97%E7%90%86%E8%AE%BA.html">
<span class="md-ellipsis">
    计算理论
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
<span class="md-ellipsis">
    大三春夏
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_4">
<span class="md-nav__icon md-icon"></span>
            大三春夏
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86.html">
<span class="md-ellipsis">
    编译原理
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../%E8%BD%AF%E5%B7%A5/%E8%BD%AF%E5%B7%A5.html">
<span class="md-ellipsis">
    软件工程
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-ellipsis">
    Blogs
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            Blogs
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../blogs/index.html">
<span class="md-ellipsis">
    blog
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
<span class="md-ellipsis">
    SRTP
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_2">
<span class="md-nav__icon md-icon"></span>
            SRTP
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../blogs/srtp/10.25/10.25%E6%95%B4%E7%90%86.html">
<span class="md-ellipsis">
    10.25 result5
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
<span class="md-ellipsis">
    intern
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_3">
<span class="md-nav__icon md-icon"></span>
            intern
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../blogs/intern/paper-reading-20240403/reading.html">
<span class="md-ellipsis">
    paper-reading-20240403
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../about/About.html">
<span class="md-ellipsis">
    About
  </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#introduction">
<span class="md-ellipsis">
      Introduction
    </span>
</a>
<nav aria-label="Introduction" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#network-hardware">
<span class="md-ellipsis">
      Network Hardware
    </span>
</a>
<nav aria-label="Network Hardware" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_2">
<span class="md-ellipsis">
      按照传输技术分
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_3">
<span class="md-ellipsis">
      按照规模分
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#communication-links">
<span class="md-ellipsis">
      Communication Links
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pan">
<span class="md-ellipsis">
      PAN
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#lan">
<span class="md-ellipsis">
      LAN
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_4">
<span class="md-ellipsis">
      其他网络
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_5">
<span class="md-ellipsis">
      网络举例
    </span>
</a>
<nav aria-label="网络举例" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_6">
<span class="md-ellipsis">
      移动网络
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#frequency-reuse">
<span class="md-ellipsis">
      Frequency Reuse
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#switching">
<span class="md-ellipsis">
      Switching
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#wlan">
<span class="md-ellipsis">
      WLAN
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_7">
<span class="md-ellipsis">
      网络协议
    </span>
</a>
<nav aria-label="网络协议" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_8">
<span class="md-ellipsis">
      设计目标
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_9">
<span class="md-ellipsis">
      协议层级
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_10">
<span class="md-ellipsis">
      参考模型
    </span>
</a>
<nav aria-label="参考模型" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#osi">
<span class="md-ellipsis">
      OSI
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#tcp-ip">
<span class="md-ellipsis">
      TCP / IP
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#metric-units">
<span class="md-ellipsis">
      Metric Units
    </span>
</a>
<nav aria-label="Metric Units" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_11">
<span class="md-ellipsis">
      网络延迟 / 损失 / 吞吐
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#physical-layer">
<span class="md-ellipsis">
      Physical Layer
    </span>
</a>
<nav aria-label="Physical Layer" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_12">
<span class="md-ellipsis">
      理论基础
    </span>
</a>
<nav aria-label="理论基础" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_13">
<span class="md-ellipsis">
      傅里叶级数
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#bandwidth-limited-signals">
<span class="md-ellipsis">
      Bandwidth-limited Signals
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-maximum-data-rate-of-a-channel">
<span class="md-ellipsis">
      The Maximum Data Rate of a Channel
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#nyquist-bandwidth">
<span class="md-ellipsis">
      Nyquist Bandwidth
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_14">
<span class="md-ellipsis">
      香农
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#transmission-media">
<span class="md-ellipsis">
      Transmission Media
    </span>
</a>
<nav aria-label="Transmission Media" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#guided-or-wired">
<span class="md-ellipsis">
      Guided or Wired
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#wireless">
<span class="md-ellipsis">
      Wireless
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_15">
<span class="md-ellipsis">
      卫星
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#digital-modulation-and-multiplexing">
<span class="md-ellipsis">
      Digital Modulation and Multiplexing
    </span>
</a>
<nav aria-label="Digital Modulation and Multiplexing" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_16">
<span class="md-ellipsis">
      数字调制
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_17">
<span class="md-ellipsis">
      三个通讯例子
    </span>
</a>
<nav aria-label="三个通讯例子" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#pstn">
<span class="md-ellipsis">
      PSTN
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#data-link-layer">
<span class="md-ellipsis">
      Data-link Layer
    </span>
</a>
<nav aria-label="Data-link Layer" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#overview">
<span class="md-ellipsis">
      Overview
    </span>
</a>
<nav aria-label="Overview" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_18">
<span class="md-ellipsis">
      实现位置
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_19">
<span class="md-ellipsis">
      服务
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#framing">
<span class="md-ellipsis">
      Framing
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#errors">
<span class="md-ellipsis">
      Errors
    </span>
</a>
<nav aria-label="Errors" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#error-correcting">
<span class="md-ellipsis">
      Error-Correcting
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#error-detection">
<span class="md-ellipsis">
      Error Detection
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_20">
<span class="md-ellipsis">
      协议
    </span>
</a>
<nav aria-label="协议" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#sliding-window-protocols">
<span class="md-ellipsis">
      Sliding Window Protocols
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#example-data-link-protocols">
<span class="md-ellipsis">
      Example Data Link Protocols
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#mac-sublayer">
<span class="md-ellipsis">
      MAC sublayer
    </span>
</a>
<nav aria-label="MAC sublayer" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#the-channel-allocation-problem">
<span class="md-ellipsis">
      The Channel Allocation Problem
    </span>
</a>
<nav aria-label="The Channel Allocation Problem" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#static-channel-allocation">
<span class="md-ellipsis">
      Static channel allocation
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dynamic-channel-allocation">
<span class="md-ellipsis">
      Dynamic Channel Allocation
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#wireless-lan-protocols">
<span class="md-ellipsis">
      Wireless LAN Protocols
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ethernet">
<span class="md-ellipsis">
      Ethernet
    </span>
</a>
<nav aria-label="Ethernet" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_21">
<span class="md-ellipsis">
      帧结构
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#performance">
<span class="md-ellipsis">
      Performance
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_22">
<span class="md-ellipsis">
      分类
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#80211-wifi">
<span class="md-ellipsis">
      802.11 WiFi
    </span>
</a>
<nav aria-label="802.11 WiFi" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#80211-mac-sublayer-protocol">
<span class="md-ellipsis">
      802.11 MAC Sublayer Protocol
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#data-link-layer-switching">
<span class="md-ellipsis">
      Data Link Layer Switching
    </span>
</a>
<nav aria-label="Data Link Layer Switching" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#physical-lan">
<span class="md-ellipsis">
      physical LAN
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#vlan">
<span class="md-ellipsis">
      VLAN
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#network-layer">
<span class="md-ellipsis">
      Network Layer
    </span>
</a>
<nav aria-label="Network Layer" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#overview_1">
<span class="md-ellipsis">
      Overview
    </span>
</a>
<nav aria-label="Overview" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_23">
<span class="md-ellipsis">
      网络层 / 路由器的功能
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#implementation-of-connectionless-service">
<span class="md-ellipsis">
      Implementation of Connectionless Service
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_24">
<span class="md-ellipsis">
      路由算法
    </span>
</a>
<nav aria-label="路由算法" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#the-link-state-ls-routing-algorithm">
<span class="md-ellipsis">
      the Link-State (LS) Routing Algorithm
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-distance-vector-dv-routing-algorithm">
<span class="md-ellipsis">
      The Distance Vector (DV) Routing Algorithm
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_25">
<span class="md-ellipsis">
      层次路由
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_26">
<span class="md-ellipsis">
      广播路由
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-network-layer-in-the-internet">
<span class="md-ellipsis">
      The network layer in the Internet
    </span>
</a>
<nav aria-label="The network layer in the Internet" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#ip-protocol">
<span class="md-ellipsis">
      IP Protocol
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ip-addressing">
<span class="md-ellipsis">
      IP addressing
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ipv6">
<span class="md-ellipsis">
      IPv6
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#control-protocol">
<span class="md-ellipsis">
      Control Protocol
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#routing-protocol">
<span class="md-ellipsis">
      Routing Protocol
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#transport-layer">
<span class="md-ellipsis">
      Transport Layer
    </span>
</a>
<nav aria-label="Transport Layer" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#overview_2">
<span class="md-ellipsis">
      Overview
    </span>
</a>
<nav aria-label="Overview" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#transport-services">
<span class="md-ellipsis">
      Transport Services
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#udp">
<span class="md-ellipsis">
      UDP
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#rtp">
<span class="md-ellipsis">
      RTP
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#tcp">
<span class="md-ellipsis">
      TCP
    </span>
</a>
<nav aria-label="TCP" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#tcp-service-model">
<span class="md-ellipsis">
      TCP Service Model
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#header">
<span class="md-ellipsis">
      Header
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#connection-establish">
<span class="md-ellipsis">
      connection establish
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="_1">计算机网络</h1>
<h2 id="introduction">Introduction</h2>
<blockquote>
<p>2023 / 09 / 19</p>
</blockquote>
<p><img alt="image-20230919122550697" src="./计网.assets/image-20230919122550697.png" style="zoom:33%;"/></p>
<h3 id="network-hardware">Network Hardware</h3>
<h4 id="_2">按照传输技术分</h4>
<p><strong><span>Broadcast links<span class="heti-spacing"> </span></span></strong>多播<span><span class="heti-spacing"> </span>multicasting</span></p>
<ul>
<li>
<p>所有机器都需要借助有线<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span><strong>无线</strong>链路。广播的<span class="heti-skip"><span class="heti-spacing"> </span>ip / Mac<span class="heti-spacing"> </span></span>地址为全<span><span class="heti-spacing"> </span>1</span>。初始的，未经分配的地址<span class="heti-skip"><span class="heti-spacing"> </span>(<span class="heti-spacing"> </span></span>初始化地址<span class="heti-skip"><span class="heti-spacing"> </span>)<span class="heti-spacing"> </span></span>为全<span><span class="heti-spacing"> </span>0</span>。</p>
</li>
<li>
<p><span>Wifi<span class="heti-spacing"> </span></span>是一个典型的广播链路。</p>
</li>
</ul>
<p><strong><span>Point-to-point links<span class="heti-spacing"> </span></span></strong>单播<span><span class="heti-spacing"> </span>unicasting</span></p>
<ul>
<li>两点之间的可选的路径很多，需要借助算法选择。</li>
</ul>
<h4 id="_3">按照规模分</h4>
<p>分类的标准为距离。</p>
<p><img alt="image-20230919102724549" src="./计网.assets/image-20230919102724549.png" style="zoom:33%;"/></p>
<h4 id="communication-links">Communication Links</h4>
<p>不同种类的线传输速率不同。<span>(<span class="heti-spacing"> </span></span>无线也是一种传输介质<span><span class="heti-spacing"> </span>)</span></p>
<p><mark>Different links can transmit data at different rates, with the transmission rate of a link measured in <em>bits/second</em></mark></p>
<div class="highlight"><table class="highlighttable"><tr><th class="filename" colspan="2"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>路线一 速率: 1K bits/s =&gt; 1 bit duration 1/1000 = 1 ms
路线二 速率: 100 bits/s =&gt; 1 bit duration 1/100 = 10 ms
如果有一个持续 10 ms 的 noise (修改对应的 bit)
路线一最多会被影响 11 bits，路线二最多被影响 2 bits
</code></pre></div></td></tr></table></div>
<h4 id="pan">PAN</h4>
<p>Personal Area Network，个人设备之间组成的网络。</p>
<p>由于<span class="heti-skip"><span class="heti-spacing"> </span>2.4 Ghz<span class="heti-spacing"> </span></span>左右为<span class="heti-skip"><span class="heti-spacing"> </span>ISM<span class="heti-spacing"> </span></span>频段，常用于个人设备之间的无线连接<span><span class="heti-spacing"> </span>(Wifi)</span>。<span>(<span class="heti-spacing"> </span></span>带宽高于 蓝牙<span><span class="heti-spacing"> </span>)</span></p>
<h4 id="lan">LAN</h4>
<p>Local Area Network，局域网。</p>
<p>有线无线都有<span class="heti-skip"><span class="heti-spacing"> </span>dynamic / static<span class="heti-spacing"> </span></span>的设计。<span>static<span class="heti-spacing"> </span></span>静态分配，<span>dynamic<span class="heti-spacing"> </span></span>动态分配。</p>
<p><strong>static</strong>：有<span class="heti-skip"><span class="heti-spacing"> </span>TDM (<span class="heti-spacing"> </span></span>时间分配<span><span class="heti-spacing"> </span>)</span>，<span>FDM (<span class="heti-spacing"> </span></span>空间分配<span class="heti-skip"><span class="heti-spacing"> </span>)<span class="heti-spacing"> </span></span>等。</p>
<p><strong>dynamic</strong>：按需分配。有中心化<span><span class="heti-spacing"> </span>(centralized)</span>，去中心化<span class="heti-skip"><span class="heti-spacing"> </span>(decentralized)<span class="heti-spacing"> </span></span>两种。</p>
<h4 id="_4">其他网络</h4>
<p>Metropolitan Area Network，城际网。</p>
<p>Wide Area Network，广域网。有两种实现，<span>VPN<span class="heti-spacing"> </span></span>和<span><span class="heti-spacing"> </span>ISP</span>。</p>
<ul>
<li>VPN，Virtual Private Network。直接在现有网络上架设。</li>
<li>ISP，Internet Service Provider。申请线路连接。</li>
</ul>
<p><mark>The cellular telephone network is an example of a WAN that uses wireless technology</mark></p>
<h3 id="_5">网络举例</h3>
<p><img alt="image-20230919105415616" src="./计网.assets/image-20230919105415616.png" style="zoom:33%;"/></p>
<p>由<span class="heti-skip"><span class="heti-spacing"> </span>hierarchy<span class="heti-spacing"> </span></span>到<span><span class="heti-spacing"> </span>distribute</span>，增加了冗余，增强了鲁棒性。</p>
<p><img alt="image-20230919105837074" src="./计网.assets/image-20230919105837074.png" style="zoom:33%;"/></p>
<h4 id="_6">移动网络</h4>
<p><img alt="image-20230919110212716" src="./计网.assets/image-20230919110212716.png" style="zoom:33%;"/></p>
<p><span>UE<span class="heti-spacing"> </span></span>用户设备。<span>eNodeB<span class="heti-spacing"> </span></span>基站。S-GW，<span>P-GW<span class="heti-spacing"> </span></span>网关，通向不同的网络<span class="heti-skip"><span class="heti-spacing"> </span>(<span class="heti-spacing"> </span></span>如，通信网络、互联网<span><span class="heti-spacing"> </span>)</span>。</p>
<p>E-UTRAN (Evolved UMTS Terrestrial Radio Access Network)，连接用户与基站。</p>
<p>EPC (Evolved Packet Core)，核心网络。HSS (Home Subscriber Server)，通信卡管理。</p>
<h4 id="frequency-reuse">Frequency Reuse</h4>
<p>为防止相互之间频段干扰，将覆盖区域分为一个个小六边形区域。相隔较远的两个六边形可以复用相同的频段。</p>
<h4 id="switching">Switching</h4>
<ul>
<li>Packet Switching。无需连接，只需包传输。如互联网。</li>
<li>Circuit Switching。需要连接。如打电话。</li>
</ul>
<h4 id="wlan">WLAN</h4>
<p>使用<strong><span class="heti-skip"><span class="heti-spacing"> </span>ISM<span class="heti-spacing"> </span></span></strong>频段，组成局域网。</p>
<ul>
<li>multipath fading。无线传输中，无线电波通过多条路线达到设备，生成了波的相消或增强。</li>
<li>为克服上述问题，可以使用不同的频率传输相同的数据。可以进行重复的传输。跟踪天线到天线之间的路径传输<span><span class="heti-spacing"> </span>(MIMO)</span>。</li>
</ul>
<p><strong><span>ALOHA<span class="heti-spacing"> </span></span></strong>算法使用随机的间隔避免传输的冲突。<span>(<span class="heti-spacing"> </span></span>降低冲突的概率<span><span class="heti-spacing"> </span>)</span></p>
<h3 id="_7">网络协议</h3>
<p>Network Protocols</p>
<h4 id="_8">设计目标</h4>
<p>可靠<span><span class="heti-spacing"> </span>Reliability</span>。需要能够处理部分节点宕机、产生错误的情况。</p>
<p>资源分配<span><span class="heti-spacing"> </span>Resource allocation</span><heti-adjacent class="heti-adjacent-quarter">。</heti-adjacent>“随来随用”。</p>
<p>进化<span><span class="heti-spacing"> </span>Evolvability</span>。使用分层结构，封装网络内部的信息，使得最新的技术可以不断得到应用。</p>
<p>安全<span><span class="heti-spacing"> </span>Security</span>。</p>
<h4 id="_9">协议层级</h4>
<p><strong>Network architecture</strong>: a set of layers and protocols</p>
<p><strong>Protocol stack</strong>: a list of the protocols used by a certain system, one protocol per layer。</p>
<p>协议定义了传输的格式，顺序，接受信号之后的处理。</p>
<div>
<table>
<tr>
<td><center><img alt="image-20230919114759194" src="./计网.assets/image-20230919114759194.png" style="zoom:33%;"/></center></td>
<td><center><img alt="image-20230919115022175" src="./计网.assets/image-20230919115022175.png" style="zoom:33%;"/></center></td>
</tr>
</table>
</div>
<p>数据自上而下得到处理<span class="heti-skip"><span class="heti-spacing"> </span>(<span class="heti-spacing"> </span></span>例如，<span>layer4<span class="heti-spacing"> </span></span>为<span class="heti-skip"><span class="heti-spacing"> </span>layer5<span class="heti-spacing"> </span></span>提高服务<span><span class="heti-spacing"> </span>)</span>。最后在物理媒介上得到传输。每层提供的服务可以是<span class="heti-skip"><span class="heti-spacing"> </span>connection-oriented<span class="heti-spacing"> </span></span>也可以是<span class="heti-skip"><span class="heti-spacing"> </span>connectionless<span class="heti-spacing"> </span></span>的。</p>
<p><img alt="image-20230919115801285" src="./计网.assets/image-20230919115801285.png" style="zoom:33%;"/></p>
<p>协议，同一层级。服务，不同层级之间。</p>
<p><mark>They are free to change their protocols at will, provided they do not change the service visible to their users</mark></p>
<p>函数的<span class="heti-skip"><span class="heti-spacing"> </span>I/O<span class="heti-spacing"> </span></span>不可变，但函数的具体实现可变。</p>
<h3 id="_10">参考模型</h3>
<h4 id="osi">OSI</h4>
<p>一共有<span class="heti-skip"><span class="heti-spacing"> </span>7<span class="heti-spacing"> </span></span>层结构。</p>
<p>The <strong>physical</strong> layer，The <strong>data link</strong> layer，The <strong>network</strong> layer，The <strong>transport</strong> layer，The <strong>session</strong> layer，The <strong>presentation</strong> layer，The <strong>application</strong> layer</p>
<p>模型本身不是某一网络的架构，只是参考。</p>
<p><img alt="image-20230919120211935" src="./计网.assets/image-20230919120211935.png" style="zoom:50%;"/></p>
<h4 id="tcp-ip">TCP / IP</h4>
<p>一共<span class="heti-skip"><span class="heti-spacing"> </span>4<span class="heti-spacing"> </span></span>层。</p>
<p><img alt="image-20230919121142162" src="./计网.assets/image-20230919121142162.png" style="zoom:50%;"/></p>
<p><img alt="image-20230919121509109" src="./计网.assets/image-20230919121509109.png" style="zoom:40%;"/></p>
<p><mark>The TCP/IP model supports only one mode in the network layer (connectionless) but both in the transport layer.</mark></p>
<h3 id="metric-units">Metric Units</h3>
<h4 id="_11">网络延迟<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>损失<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>吞吐</h4>
<ul>
<li>Processing delay：包的处理与读取。</li>
<li>Queuing delay：排队传输。</li>
<li>Transmission delay (or the store-and-forward delay): L (the length of packet in bits) / R (the transmission rate of a link)</li>
<li>Propagation delay is the distance between two routers divided by the propagation speed.</li>
</ul>
<p>线路不完美，可能丢包造成损失。</p>
<p>网络的吞吐量由最慢处决定。</p>
<p><mark>IPv4：32 bits；IPv6：128 bits；Mac：48 bits</mark></p>
<h2 id="physical-layer">Physical Layer</h2>
<blockquote>
<p>2023 / 09 / 26</p>
</blockquote>
<p><img alt="image-20231010122443095" src="./计网.assets/image-20231010122443095.png" style="zoom:33%;"/></p>
<p>不同的<span class="heti-skip"><span class="heti-spacing"> </span>physical channel<span class="heti-spacing"> </span></span>会影响：吞吐、延迟、错误率。</p>
<h3 id="_12">理论基础</h3>
<h4 id="_13">傅里叶级数</h4>
<p>对于一个周期性信号 <span class="arithmatex">\(g(t) = g(t+nT_0)\)</span>，光滑、连续。</p>
<p><span class="arithmatex">\(g(t)= \sum^{+\infin}_{n = -\infin} a_ne^{j2\pi f_0 nt}\)</span> 其中 <span class="arithmatex">\(a_n\)</span> 是一系列的系数<span class="heti-skip"><span class="heti-spacing"> </span>(<span class="heti-spacing"> </span></span>不一定是实数<span><span class="heti-spacing"> </span>)</span>，<span class="arithmatex">\(f_0\)</span> 为 <span class="arithmatex">\(1/T_0\)</span>。</p>
<p>也可以得到 <span class="arithmatex">\(a_n = \frac{1}{T} \int_T g(t)e^{-j2\pi f_0 nt}dt\)</span></p>
<p>使用欧拉公式展开可以得到：<span class="arithmatex">\(g(t) = C+\sum_{n=1}^{\infin}2A_ncos(2\pi n f_0 t) + \sum_{n=1}^{\infin}2B_nsin(2\pi n f_0 t)\)</span></p>
<p>其中 <span class="arithmatex">\(A_n=\frac{1}{T}\int_T g(t) cos(2\pi n f_0t)dt\)</span>，<span class="arithmatex">\(B_n=\frac{1}{T}\int_T g(t) sin(2\pi n f_0t)dt\)</span>，<span class="arithmatex">\(C_n=\frac{1}{T}\int_T g(t)dt\)</span></p>
<p>傅里叶级数中的积分有一些性质如下：</p>
<p><img alt="image-20230926103131692" src="./计网.assets/image-20230926103131692.png" style="zoom:33%;"/></p>
<h4 id="bandwidth-limited-signals">Bandwidth-limited Signals</h4>
<p>任何<span class="heti-skip"><span class="heti-spacing"> </span>channel<span class="heti-spacing"> </span></span>下信号都会衰减。不同的<span class="heti-skip"><span class="heti-spacing"> </span>channel<span class="heti-spacing"> </span></span>对不同频率的信号的衰减幅度不一致。</p>
<p>对某种线材，频率在<span class="heti-skip"><span class="heti-spacing"> </span>0~<span class="heti-spacing"> </span></span><span class="arithmatex">\(f_c\)</span>之间的信号衰减可以接受，<span class="arithmatex">\(f_c\)</span> 为截止频率。</p>
<p>可以以较小衰减传输的频率的宽度<span class="heti-skip"><span class="heti-spacing"> </span>(<span class="heti-spacing"> </span></span>范围<span class="heti-skip"><span class="heti-spacing"> </span>)<span class="heti-spacing"> </span></span>称为带宽。</p>
<p><img alt="image-20230926105101025" src="./计网.assets/image-20230926105101025.png" style="zoom:33%;"/></p>
<p><strong>Baseband signals vs. Passband signals</strong></p>
<ul>
<li>Baseband signals，基带信号，run from 0 up to a maximum frequency。</li>
<li>Passband signals，shifted to occupy a higher range of frequencies, such as in the case of all wireless transmission。</li>
</ul>
<p>调频，此处的 <span class="arithmatex">\(f_c\)</span> 为载波频率：</p>
<p><img alt="image-20230926105846500" src="./计网.assets/image-20230926105846500.png" style="zoom:33%;"/></p>
<p><strong>bandwidth vs. maximun data rate</strong></p>
<ul>
<li><span>EE<span class="heti-spacing"> </span></span>中<span class="heti-skip"><span class="heti-spacing"> </span>bandwidth<span class="heti-spacing"> </span></span>单位为<span><span class="heti-spacing"> </span>Hz</span>，计算机科学中为<span><span class="heti-spacing"> </span>bits/sec</span>。</li>
<li>频率理论上可以无限高，但是相应的衰减可能增加，对于接收端的要求也会变高。所以<span class="heti-skip"><span class="heti-spacing"> </span>Data Rate<span class="heti-spacing"> </span></span>与物理信道的模拟信号高度相关。</li>
</ul>
<h4 id="the-maximum-data-rate-of-a-channel">The Maximum Data Rate of a Channel</h4>
<ul>
<li>
<p>Channel Capacity：在给定条件下，数据在给定通信路径或信道上传输的最大速率。</p>
</li>
<li>
<p>Data rate (bps)：If the binary-input and binary-output channel is noise free, the data rate will be 1bps.</p>
</li>
<li>Bandwidth：由发射的机制<span class="heti-skip"><span class="heti-spacing"> </span>(<span class="heti-spacing"> </span></span>防止干扰<span><span class="heti-spacing"> </span>)</span>，以及物理介质的性质决定。</li>
<li>Noise：会影响数据传输的速率。</li>
<li>Error rate：传输错误的概率，将<span class="heti-skip"><span class="heti-spacing"> </span>0<span class="heti-spacing"> </span></span>传成<span><span class="heti-spacing"> </span>1</span>，<span>1<span class="heti-spacing"> </span></span>传成<span><span class="heti-spacing"> </span>0</span>。</li>
</ul>
<h4 id="nyquist-bandwidth">Nyquist Bandwidth</h4>
<p>无噪声情况下的符号速率。</p>
<p><span class="arithmatex">\(C = 2B\)</span> <span>(<span class="heti-spacing"> </span></span>一共只有两种电平状态<span><span class="heti-spacing"> </span>)</span>，<span>B<span class="heti-spacing"> </span></span>为带宽，<span>C<span class="heti-spacing"> </span></span>为<span><span class="heti-spacing"> </span>Channal Capacity</span>。<span class="arithmatex">\(C = 2Blog_2V\)</span> <span>(V<span class="heti-spacing"> </span></span>意为不同的信号以及对应的电平状态，例如若一次传输<span><span class="heti-spacing"> </span>2bits</span>，就需要<span class="heti-skip"><span class="heti-spacing"> </span>4<span class="heti-spacing"> </span></span>种电平来表示<span><span class="heti-spacing"> </span>)</span>。</p>
<h4 id="_14">香农</h4>
<ul>
<li><span>data rate<span class="heti-spacing"> </span></span>越高，噪声影响的<span class="heti-skip"><span class="heti-spacing"> </span>bits<span class="heti-spacing"> </span></span>越多。</li>
<li>发射能力越高，<span>noise<span class="heti-spacing"> </span></span>的影响最小。</li>
</ul>
<p><strong>Shannon Capacity</strong>：<span class="arithmatex">\(C = B log_2(1+SNR)\)</span>，只考虑白噪声<span class="heti-skip"><span class="heti-spacing"> </span>(<span class="heti-spacing"> </span></span>高斯噪声<span><span class="heti-spacing"> </span>)</span>，不考虑衰减、延迟、脉冲噪声。</p>
<p>其中 <span class="arithmatex">\(SNR_{db} = 10 log_{10}(signal\,power/noise\,power)=10log_{10}SNR\)</span>，<span>SNR<span class="heti-spacing"> </span></span>为信噪比。</p>
<p>带宽越高，<span>SNR<span class="heti-spacing"> </span></span>越低，但接受到的<span class="heti-skip"><span class="heti-spacing"> </span>noise<span class="heti-spacing"> </span></span>越多。</p>
<h3 id="transmission-media">Transmission Media</h3>
<h4 id="guided-or-wired">Guided or Wired</h4>
<ul>
<li>
<p>固定储存<span class="heti-skip"><span class="heti-spacing"> </span>(<span class="heti-spacing"> </span></span>硬盘传输<span><span class="heti-spacing"> </span>)</span>。</p>
</li>
<li>
<p>双绞线：这种设计可以提高鲁棒性，因为信号通过两根线的电压差来表示，噪声的干扰就比较小<span class="heti-skip"><span class="heti-spacing"> </span>(<span class="heti-spacing"> </span></span>影响是同步的<span><span class="heti-spacing"> </span>)</span>。可以传输数字信号和模拟信号。带宽由导线的粗细和长度决定。</p>
</li>
<li>
<p>同轴电缆：常用于有线电视、城域网，带宽高于双绞线。</p>
</li>
<li>
<p>Power Lines，交流电线：可以传输一些低频的信号，但主要用于输电。</p>
</li>
<li>
<p>光纤：多模光纤<span class="heti-skip"><span class="heti-spacing"> </span>(<span class="heti-spacing"> </span></span>含多根光纤<span><span class="heti-spacing"> </span>)</span>，单模光纤。带宽高，不受电涌、电磁干扰、停电、腐蚀性化学品的影响，重量较轻。易损。</p>
</li>
</ul>
<p><img alt="image-20230926115803287" src="./计网.assets/image-20230926115803287.png" style="zoom:33%;"/></p>
<h4 id="wireless">Wireless</h4>
<p><img alt="image-20230926120458034" src="./计网.assets/image-20230926120458034.png" style="zoom:33%;"/></p>
<ul>
<li>UWB (Ultra WideBand)：sends a series of rapid pulses, varying their position to communicate information. The rapid transitions lead to a signal that is spread thinly over a very wide frequency band.</li>
<li>微波通讯：&gt;100MHz，直线传播，需要对齐，受环境<span class="heti-skip"><span class="heti-spacing"> </span>(<span class="heti-spacing"> </span></span>如水汽<span class="heti-skip"><span class="heti-spacing"> </span>)<span class="heti-spacing"> </span></span>的影响。很多时候需要中继站。</li>
<li>红外通讯：有方向性、配置简单，不能穿过固体障碍物，不需要国家的批准。</li>
</ul>
<h4 id="_15">卫星</h4>
<p>与线缆通讯的优劣：</p>
<ul>
<li>卫星通讯可以覆盖更广的地域，环境适应性强，对基础设施的依赖性低。</li>
</ul>
<h3 id="digital-modulation-and-multiplexing">Digital Modulation and Multiplexing</h3>
<h4 id="_16">数字调制</h4>
<p>将数据比特转化为信号。</p>
<p>传输信号有两种方式：</p>
<ul>
<li>
<p>基带传输，使用有线通道传输。信号占据可用频段区间的全部。</p>
</li>
<li>
<p>通带传输，使用无线和光纤通信。信号只占据载波信号频段附近的频段。</p>
</li>
<li>有调幅、调频、调相位三种调制方式。</li>
</ul>
<p><code>多路复用 multiplexing</code>：一根线传输多种信号。</p>
<p><strong>基带传输</strong></p>
<p><img alt="image-20231010102105461" src="./计网.assets/image-20231010102105461.png" style="zoom:33%;"/></p>
<ul>
<li><span>(b) NRZ<span class="heti-spacing"> </span></span>正电平表示<span><span class="heti-spacing"> </span>1</span>，负电平表示<span><span class="heti-spacing"> </span>0</span>。接收端也根据此进行解码。信号会有衰减和失真，解码时会解码到最接近的比特上。</li>
</ul>
<p><mark>The bit rate = the symbol rate <span class="arithmatex">\(\times\)</span> the number of bits per symbol</mark></p>
<p>一个<span class="heti-skip"><span class="heti-spacing"> </span>symbol<span class="heti-spacing"> </span></span>中可能会有多个<span><span class="heti-spacing"> </span>bit</span>，这样可以提高带宽的使用效率，但对于接收端的要求也随之提高。</p>
<ul>
<li><span>(d)<span class="heti-spacing"> </span></span>曼彻斯特编码<span class="heti-skip"><span class="heti-spacing"> </span>(<span class="heti-spacing"> </span></span>许多以太网技术中采用<span><span class="heti-spacing"> </span>)</span>。接收端需要知道一个<span class="heti-skip"><span class="heti-spacing"> </span>symbol<span class="heti-spacing"> </span></span>何时结束，下一个<span class="heti-skip"><span class="heti-spacing"> </span>symbol<span class="heti-spacing"> </span></span>何时开始。使用一个独立的时钟信号与传输信号进行<span><span class="heti-spacing"> </span>xor</span>。 0 - a low-to-high transition；1 - a high-to low transition。</li>
<li><span>(c) NRZI (USB<span class="heti-spacing"> </span></span>中使用<span><span class="heti-spacing"> </span>)</span>。</li>
<li>Scrambling，一种信号的加密技术，与某一信号进行<span class="heti-skip"><span class="heti-spacing"> </span>xor<span class="heti-spacing"> </span></span>使之更像白噪声，在接收端再次<span class="heti-skip"><span class="heti-spacing"> </span>xor<span class="heti-spacing"> </span></span>还原。</li>
<li>Balanced signals (bipolar encoding)，短时间内平均的电平为<span><span class="heti-spacing"> </span>0</span>，近似为直流电而不需要直流电元件，可以减少直流元件对于信号的衰减。<span>(<span class="heti-spacing"> </span></span><span class="arithmatex">\(\pm\)</span><span>1<span class="heti-spacing"> </span></span>表示<span><span class="heti-spacing"> </span>1</span>，<span>0<span class="heti-spacing"> </span></span>表示<span><span class="heti-spacing"> </span>0)</span></li>
</ul>
<p><strong>通带传输</strong></p>
<p>一般需要较高的传输频率减小波长。</p>
<p>三种调制的方式：</p>
<ul>
<li>调幅：振幅为<span class="heti-skip"><span class="heti-spacing"> </span>0<span class="heti-spacing"> </span></span>表示<span><span class="heti-spacing"> </span>0</span>，其余情况为<span><span class="heti-spacing"> </span>1</span>。</li>
<li>调频：频率的疏密以区分<span><span class="heti-spacing"> </span>0</span>，1。</li>
<li>调相位：信号变化的节点改变相位。</li>
</ul>
<p><img alt="image-20231010105656775" src="./计网.assets/image-20231010105656775.png" style="zoom:33%;"/></p>
<p>可以结合调相位和调幅进行更高效率的传输。</p>
<p><img alt="image-20231010105829233" src="./计网.assets/image-20231010105829233.png" style="zoom:33%;"/></p>
<p>相当于一个<span><span class="heti-spacing"> </span>symbol 4 bits ~ 64 bits</span>。</p>
<p>不使用同心圆是由于只是用轴向的振动更简单。</p>
<p>以上情况在编码时使用<span><span class="heti-spacing"> </span>Gray code</span>，为最大程度地抵消信号传输地损失，最多发生一位地传输错误。</p>
<p><img alt="image-20231010110209599" src="./计网.assets/image-20231010110209599.png" style="zoom:33%;"/></p>
<p><strong>FDM</strong> (Frequency Division Multiplexing)：将频段划分给不同的信号进行传输。</p>
<p><strong>OFDM</strong> (Orthogonal FDM)：相比<span><span class="heti-spacing"> </span>FDM</span>，由于信号能量主要集中于传输频率附近，频段之间可以部分重叠。距离传输频率较远的频率对于其他频段相当于噪声。</p>
<p><strong>TDM</strong> (Time Division Multiplexing)：循环机制，每个用户都有一段时间占有全部的带宽。</p>
<p><img alt="image-20231010110939728" src="./计网.assets/image-20231010110939728.png" style="zoom:33%;"/></p>
<p>必须同步。</p>
<p><strong>CDM</strong> (Code Division Multiplexing)：不同用户的信息编码成唯一的码（码片或序列），然后将这些码片混合在一起传输，最后在接收端使用正确的码片来解码并还原原始信息。这种技术允许多个用户同时共享相同的频谱带宽，并且能够在同一频段上同时传输和接收数据，而不会干扰彼此。(m chips)</p>
<p><img alt="image-20231010112536810" src="./计网.assets/image-20231010112536810.png" style="zoom:33%;"/></p>
<p>可以根据这个分析出传输的代码段有哪些。</p>
<h3 id="_17">三个通讯例子</h3>
<h4 id="pstn">PSTN</h4>
<p><img alt="image-20231010112925926" src="./计网.assets/image-20231010112925926.png" style="zoom:33%;"/></p>
<p><strong>Local loops</strong>: telephone modem, ADSL, fiber</p>
<ul>
<li>Telephone modems：模拟信号和数字信息之间的转换器。</li>
</ul>
<p><strong>Trunks</strong> (digital fiber optic links connecting switching offices) - main consideration problem is multiplexing (FDM and TDM) </p>
<p><strong>Switching offices</strong> (where calls are moved from one trunk to another) - two switching ways</p>
<p><img alt="image-20231010113330613" src="./计网.assets/image-20231010113330613.png" style="zoom:33%;"/></p>
<p><strong>Nyquist Sampling</strong>：使用原始频率两倍的频率进行采样，防止混叠。高于这个频率，不能获得更多信息，低于这个频率，不能获得足够的信息。没有<span class="heti-skip"><span class="heti-spacing"> </span>bandlimited<span class="heti-spacing"> </span></span>的信号不能正确采样重建。例如电话的频率约为<span><span class="heti-spacing"> </span>4k Hz</span>，则采样频率需要是<span><span class="heti-spacing"> </span>8k Hz</span>，如果有<span class="heti-skip"><span class="heti-spacing"> </span>8 bit<span class="heti-spacing"> </span></span>进行传输，则需要的<span class="heti-skip"><span class="heti-spacing"> </span>modern<span class="heti-spacing"> </span></span>为<span><span class="heti-spacing"> </span>64 kbps</span>。</p>
<p><strong>Local Loop</strong></p>
<p>电话线改造后<span class="heti-skip"><span class="heti-spacing"> </span>(<span class="heti-spacing"> </span></span>去掉滤波器<span><span class="heti-spacing"> </span>)</span>，传输的机制如下：</p>
<ul>
<li>
<p>The available 1.1 MHz spectrum on the local loop is divided into 256 independent channels of around 4 kHz each.</p>
</li>
<li>
<p>The OFDM scheme is used to send data over these channels, though it is often called <strong>DMT</strong> (Discrete MultiTone) in the context of ADSL.</p>
</li>
<li>
<p>Channel 0 is used for POTS (Plain Old Telephone Service)</p>
</li>
<li>
<p>Channels 1-5 are not used to keep the voice and data signals from <em>interfering</em> with each other.</p>
</li>
<li>
<p>Of the remaining 250 channels, one is used for <strong>upstream control</strong> and one is used for <strong>downstream control</strong>. The rest are available for <strong>user data</strong>.</p>
</li>
</ul>
<p><img alt="image-20231010115624890" src="./计网.assets/image-20231010115624890.png" style="zoom:33%;"/></p>
<p><strong>Trunks</strong></p>
<ul>
<li>使用数字信号非模拟信号<span class="heti-skip"><span class="heti-spacing"> </span>(<span class="heti-spacing"> </span></span>不是语言<span><span class="heti-spacing"> </span>)</span>。速率较电话线块。</li>
<li>需要<span><span class="heti-spacing"> </span>multiplexing</span>，使用<span class="heti-skip"><span class="heti-spacing"> </span>FDM<span class="heti-spacing"> </span></span>或者<span><span class="heti-spacing"> </span>TDM</span>。</li>
</ul>
<p><strong>SONET/SDH</strong> (Synchronous Optics NETwork)：a standardization of optical TDM system。</p>
<p><strong>WDM</strong> (Wave-length Division Multiplexing)。</p>
<p><strong>Switching</strong></p>
<p>分为<span class="heti-skip"><span class="heti-spacing"> </span>circuit switching<span class="heti-spacing"> </span></span>和<span><span class="heti-spacing"> </span>packet switching</span>。</p>
<p><span>circuit switching<span class="heti-spacing"> </span></span>需要建立专门的<span class="heti-skip"><span class="heti-spacing"> </span>end-to-end<span class="heti-spacing"> </span></span>链路。</p>
<p><span>packet switching<span class="heti-spacing"> </span></span>无需建立专门的链路。路由器负责接收和转发数据包。数据包的大小有限制。存在排队延迟和阻塞。</p>
<table>
<thead>
<tr>
<th><img alt="image-20231010120852085" src="./计网.assets/image-20231010120852085.png" style="zoom:33%;"/></th>
<th><img alt="image-20231010120947104" src="./计网.assets/image-20231010120947104.png" style="zoom:33%;"/></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><img alt="image-20231010120912401" src="./计网.assets/image-20231010120912401.png" style="zoom:33%;"/></p>
<h2 id="data-link-layer">Data-link Layer</h2>
<blockquote>
<p>2023 / 10 / 17</p>
</blockquote>
<table>
<thead>
<tr>
<th><img alt="image-20231024121150903" src="./计网.assets/image-20231024121150903.png" style="zoom:33%;"/></th>
<th><img alt="image-20231024121216202" src="./计网.assets/image-20231024121216202.png" style="zoom:33%;"/></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="overview">Overview</h3>
<p>数据链路层通过物理层的服务接收发送<span><span class="heti-spacing"> </span>bits</span>。</p>
<p>数据链路层的树妖功能：Framing，错误处理，flow control。</p>
<ul>
<li>Framing：封装离散的帧。</li>
<li>错误处理<span class="heti-skip"><span class="heti-spacing"> </span>(<span class="heti-spacing"> </span></span>检测以及处理<span><span class="heti-spacing"> </span>)</span>：根据计时器和序列号<span class="heti-skip"><span class="heti-spacing"> </span>(ACK)<span class="heti-spacing"> </span></span>确认数据是否得到了正确地接收。</li>
<li>Flow control：防止接收端数据超载。</li>
<li>Feedback-based flow control (the data link layer): receiver gives sender permission.</li>
<li>Rate-based flow control (the transportation layer): limit the data rate at witch the sender may transmit data.</li>
</ul>
<h4 id="_18">实现位置</h4>
<p>数据链路层处于的位置：</p>
<p><img alt="image-20231017102023621" src="./计网.assets/image-20231017102023621.png" style="zoom:33%;"/></p>
<p>实际设备中的实现路径：</p>
<p><img alt="image-20231017102136687" src="./计网.assets/image-20231017102136687.png" style="zoom:33%;"/></p>
<p>数据链路层通常在网络适配器<span class="heti-skip"><span class="heti-spacing"> </span>(<span class="heti-spacing"> </span></span>网卡<span class="heti-skip"><span class="heti-spacing"> </span>)<span class="heti-spacing"> </span></span>上实现。</p>
<h4 id="_19">服务</h4>
<ul>
<li>Unacknowledged connectionless service：主要用于出错率较低的实时通讯中<span class="heti-skip"><span class="heti-spacing"> </span>(<span class="heti-spacing"> </span></span>以太网<span><span class="heti-spacing"> </span>)</span>。</li>
<li>Acknowledged connectionless service：无链接，但是需要回函确认，适用于不可靠的信道<span><span class="heti-spacing"> </span>(802.11 WiFi)</span>。</li>
<li>Acknowledged connection-oriented service：建立专门的链接<span class="heti-skip"><span class="heti-spacing"> </span>(<span class="heti-spacing"> </span></span>需要经过建立、传输、释放三个过程<span><span class="heti-spacing"> </span>)</span>，适用于长距离、不可靠的传输<span class="heti-skip"><span class="heti-spacing"> </span>(<span class="heti-spacing"> </span></span>卫星通讯<span><span class="heti-spacing"> </span>)</span>。</li>
</ul>
<h3 id="framing">Framing</h3>
<p><img alt="image-20231017102939420" src="./计网.assets/image-20231017102939420.png" style="zoom:33%;"/></p>
<p>从<span class="heti-skip"><span class="heti-spacing"> </span>NetWork Layer<span class="heti-spacing"> </span></span>在中获取<span><span class="heti-spacing"> </span>packet</span>，封装到帧中传输。</p>
<p>物理层存在噪声，为减小衰减，物理层会加入部分冗余信息。</p>
<p><span>Data-link layer<span class="heti-spacing"> </span></span>会生成<span class="heti-skip"><span class="heti-spacing"> </span>checksum<span class="heti-spacing"> </span></span>用于校验。接收端会重新计算、校验。出错后处理<span class="heti-skip"><span class="heti-spacing"> </span>(<span class="heti-spacing"> </span></span>回传错误报告或丢弃<span><span class="heti-spacing"> </span>)</span>。</p>
<p>找到帧的开头较为困难，需要有一个好的设计，尽量提高带宽。</p>
<p>有四种标识的方法：</p>
<ul>
<li>
<p>Byte count：在<span class="heti-skip"><span class="heti-spacing"> </span>header<span class="heti-spacing"> </span></span>中的特定字段表示帧的字节数。</p>
</li>
<li>
<p><img alt="image-20231017103633648" src="./计网.assets/image-20231017103633648.png" style="zoom:33%;"/></p>
</li>
<li>
<p>Flag bytes with byte stuffing：插入一个特殊的字节解决。插入<span><span class="heti-spacing"> </span>flag (PPP)</span>。</p>
</li>
<li>
<p><img alt="image-20231017103942868" src="./计网.assets/image-20231017103942868.png" style="zoom:33%;"/></p>
</li>
<li>
<p>但<span class="heti-skip"><span class="heti-spacing"> </span>data<span class="heti-spacing"> </span></span>中也可能出现<span class="heti-skip"><span class="heti-spacing"> </span>flag<span class="heti-spacing"> </span></span>字段，解决方案是在异常的<span class="heti-skip"><span class="heti-spacing"> </span>flag<span class="heti-spacing"> </span></span>前，插入<span><span class="heti-spacing"> </span>ESC</span>。</p>
</li>
<li>
<p><img alt="image-20231017104352751" src="./计网.assets/image-20231017104352751.png" style="zoom:33%;"/></p>
</li>
<li>
<p>Flag Byte with Bit Stuffing：在<span class="heti-skip"><span class="heti-spacing"> </span>bit<span class="heti-spacing"> </span></span>的层级上实现区分<span><span class="heti-spacing"> </span>(USB)</span>。</p>
</li>
<li>
<p>例如，<span>flag<span class="heti-spacing"> </span></span>为<span class="heti-skip"><span class="heti-spacing"> </span>0x7E (<span class="heti-spacing"> </span></span>连续的<span class="heti-skip"><span class="heti-spacing"> </span>6<span class="heti-spacing"> </span></span>个<span><span class="heti-spacing"> </span>1)</span>。发送端会在核心数据部分检测到<span class="heti-skip"><span class="heti-spacing"> </span>5<span class="heti-spacing"> </span></span>个连续的<span class="heti-skip"><span class="heti-spacing"> </span>1<span class="heti-spacing"> </span></span>后自动加一个<span><span class="heti-spacing"> </span>0</span>，方式错误。接收端则会相应去除连续<span class="heti-skip"><span class="heti-spacing"> </span>5<span class="heti-spacing"> </span></span>个<span class="heti-skip"><span class="heti-spacing"> </span>1<span class="heti-spacing"> </span></span>后的<span><span class="heti-spacing"> </span>0</span>。</p>
</li>
<li>
<p><img alt="image-20231017104947881" src="./计网.assets/image-20231017104947881.png" style="zoom:33%;"/></p>
</li>
<li>
<p>Coding Violations：前两种方法导致帧的长度与内容有关。物理层也会有一些冗余。目前的数据链据经常采用混合的方法。，并使用编码反转的位置作为<span class="heti-skip"><span class="heti-spacing"> </span>frame<span class="heti-spacing"> </span></span>的开端。</p>
</li>
<li>
<p><img alt="image-20231017105410611" src="./计网.assets/image-20231017105410611.png" style="zoom:33%;"/></p>
</li>
</ul>
<h3 id="errors">Errors</h3>
<p>有两种策略：</p>
<ul>
<li>携带足够的冗余信息，即使出错也可以自行推断出正确的信息。</li>
<li>携带一定的信息，能发现出错，但需要回传。</li>
</ul>
<p>但是这两种策略都不能保证传输的正确性，因为噪声也可能影响冗余<span><span class="heti-spacing"> </span>bits</span>。</p>
<ul>
<li><span>errors<span class="heti-spacing"> </span></span>可能由极端值导致单<span class="heti-skip"><span class="heti-spacing"> </span>bit<span class="heti-spacing"> </span></span>位失效。也可能是随机产生的。</li>
</ul>
<h4 id="error-correcting">Error-Correcting</h4>
<ul>
<li>Hamming Distance：两个等长二进制数有几位<span class="heti-skip"><span class="heti-spacing"> </span>bits<span class="heti-spacing"> </span></span>不一样。</li>
<li>对于<span class="heti-skip"><span class="heti-spacing"> </span>n<span class="heti-spacing"> </span></span>个二进制数码本，两两配对，找到最小的<span><span class="heti-spacing"> </span>hamming distance</span>，即整个码本的<span><span class="heti-spacing"> </span>distance</span>。</li>
</ul>
<p><strong>n-bit codeword</strong>：<span>n = m (<span class="heti-spacing"> </span></span>实际传输<span class="heti-skip"><span class="heti-spacing"> </span>) + r (<span class="heti-spacing"> </span></span>冗余<span><span class="heti-spacing"> </span>)</span>。</p>
<p><strong>code-rate</strong>：m / n。</p>
<p>如果需要检测<span class="heti-skip"><span class="heti-spacing"> </span>d bits<span class="heti-spacing"> </span></span>的错误，码本的<span class="heti-skip"><span class="heti-spacing"> </span>hamming distance<span class="heti-spacing"> </span></span>至少为<span><span class="heti-spacing"> </span>d + 1</span>。</p>
<p>如果需要纠正<span class="heti-skip"><span class="heti-spacing"> </span>d bits<span class="heti-spacing"> </span></span>的错误，码本的<span class="heti-skip"><span class="heti-spacing"> </span>hamming distance<span class="heti-spacing"> </span></span>知道为<span><span class="heti-spacing"> </span>2d + 1</span>。</p>
<ul>
<li>例如一个码本——0000000000, 0000011111, 1111100000, 1111111111，<span>distance<span class="heti-spacing"> </span></span>为<span><span class="heti-spacing"> </span>5</span>，可以检测<span class="heti-skip"><span class="heti-spacing"> </span>4<span class="heti-spacing"> </span></span>位错误，纠正<span class="heti-skip"><span class="heti-spacing"> </span>2<span class="heti-spacing"> </span></span>位错误。</li>
<li>例如一个码字出现错误变成<span><span class="heti-spacing"> </span>0000000111</span>，可以找出最接近的原<span><span class="heti-spacing"> </span>codeword</span>：0000011111。</li>
<li>但如果 上述的错误<span class="heti-skip"><span class="heti-spacing"> </span>codeword<span class="heti-spacing"> </span></span>是由<span class="heti-skip"><span class="heti-spacing"> </span>0000000000<span class="heti-spacing"> </span></span>转变而来，则不能正确纠正。</li>
</ul>
<p>如果需要纠<span class="heti-skip"><span class="heti-spacing"> </span>1 bit<span class="heti-spacing"> </span></span>的错误，<span>m-bit<span class="heti-spacing"> </span></span>的<span><span class="heti-spacing"> </span>codeword</span>，加上<span class="heti-skip"><span class="heti-spacing"> </span>r-bit<span class="heti-spacing"> </span></span>的冗余，变为<span class="heti-skip"><span class="heti-spacing"> </span>n-bit<span class="heti-spacing"> </span></span>的<span><span class="heti-spacing"> </span>codeword</span>，<span>hamming distance<span class="heti-spacing"> </span></span>为<span><span class="heti-spacing"> </span>1</span>，需要满足：</p>
<p><img alt="image-20231017112103224" src="./计网.assets/image-20231017112103224.png" style="zoom:33%;"/></p>
<p><strong>Hamming code</strong>：纠正<span class="heti-skip"><span class="heti-spacing"> </span>1<span class="heti-spacing"> </span></span>位的错误，具体可以参考以下网址👇</p>
<p><a href="https://blog.csdn.net/qq_19782019/article/details/87452394">汉明码——计算机网络——全网最通俗的讲解<span class="heti-skip"><span class="heti-spacing"> </span>-CSDN<span class="heti-spacing"> </span></span>博客</a></p>
<p>具体来说，就是在<span class="heti-skip"><span class="heti-spacing"> </span>2<span class="heti-spacing"> </span></span><sup><span class="heti-skip"><span class="heti-spacing"> </span>i<span class="heti-spacing"> </span></span></sup>位上添加奇偶校验码。</p>
<p>例如，如果有<span class="heti-skip"><span class="heti-spacing"> </span>4<span class="heti-spacing"> </span></span>位校验码，分别在<span><span class="heti-spacing"> </span>0001</span>，0010， 0100，<span>1000<span class="heti-spacing"> </span></span>位上，这<span class="heti-skip"><span class="heti-spacing"> </span>0001<span class="heti-spacing"> </span></span>负责所有最后一位为<span class="heti-skip"><span class="heti-spacing"> </span>1<span class="heti-spacing"> </span></span>的校验<span><span class="heti-spacing"> </span>(1001</span>，0111，0011，0101，1011)，以此类推。可以在出错时，对相应的位进行奇偶校验。如果校验出错，则对应位为<span class="heti-skip"><span class="heti-spacing"> </span>1 (<span class="heti-spacing"> </span></span>如果<span class="heti-skip"><span class="heti-spacing"> </span>0001<span class="heti-spacing"> </span></span>对应的校验出错，则第一位上为<span><span class="heti-spacing"> </span>1)</span>。最终直接可以推断出出错的<span class="heti-skip"><span class="heti-spacing"> </span>bit<span class="heti-spacing"> </span></span>的位置。</p>
<h4 id="error-detection">Error Detection</h4>
<p><strong>奇偶校验</strong>：相对<span class="heti-skip"><span class="heti-spacing"> </span>hamming code<span class="heti-spacing"> </span></span>冗余更少，在单纯的检测上效率更高，但需要重传，也存在一些困难。</p>
<p><strong>Interleaving</strong>：对齐不同的<span class="heti-skip"><span class="heti-spacing"> </span>channel<span class="heti-spacing"> </span></span>进行奇偶校验，可以检测连续的错误。</p>
<p><img alt="image-20231017114935179" src="./计网.assets/image-20231017114935179.png" style="zoom:33%;"/></p>
<p><strong>An Two Dimensional Even Parity Example</strong>：单信道、多信道都进行奇偶校验，可以定位错误。</p>
<p><img alt="image-20231017115158481" src="./计网.assets/image-20231017115158481.png" style="zoom:33%;"/></p>
<p><strong>Checksum</strong>：对数据进行加和，注意需要溢出为加到加和值上。</p>
<p><img alt="image-20231017115523641" src="./计网.assets/image-20231017115523641.png" style="zoom:33%;"/></p>
<p><img alt="image-20231017115607362" src="./计网.assets/image-20231017115607362.png" style="zoom:33%;"/></p>
<p><strong>CRC</strong>：具体可以参考以下网址👇</p>
<p><a href="https://blog.csdn.net/liyuanbhu/article/details/7882789?ops_request_misc=%7B%22request%5Fid%22%3A%22169751532816800226535943%22%2C%22scm%22%3A%2220140713.130102334.pc%5Fall.%22%7D&amp;request_id=169751532816800226535943&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~hot_rank-1-7882789-null-null.142^v96^pc_search_result_base2&amp;utm_term=CRC&amp;spm=1018.2226.3001.4187">循环冗余校验（CRC）算法入门引导<span class="heti-skip"><span class="heti-spacing"> </span>-CSDN<span class="heti-spacing"> </span></span>博客</a></p>
<h3 id="_20">协议</h3>
<ul>
<li>Utopian Simplex Protocol：理想化、一端发送，一端接受。</li>
<li>Simplex Stop-and-Wait Protocol for an <strong>Error-Free</strong> Channel：考虑了<span class="heti-skip"><span class="heti-spacing"> </span>flooding<span class="heti-spacing"> </span></span>问题，回传一个反馈确认信息是否收到。</li>
<li>Simplex Stop-and-Wait Protocol for a <strong>Noisy</strong> Channel：考虑了噪声，增加一个计时器，如果<span class="heti-skip"><span class="heti-spacing"> </span>frame<span class="heti-spacing"> </span></span>错误，直接丢弃不反馈，时间超出后，发送端重传。但可能会造成重复，原因可能是<span class="heti-skip"><span class="heti-spacing"> </span>ACK<span class="heti-spacing"> </span></span>信号丢失，回传信号未到达。为避免重复：</li>
<li>计时器需要设置合适的时长。</li>
<li>为每一个<span class="heti-skip"><span class="heti-spacing"> </span>frame<span class="heti-spacing"> </span></span>增加一个序列号。<ul>
<li>序列号只需要<span class="heti-skip"><span class="heti-spacing"> </span>1 bit<span class="heti-spacing"> </span></span>即可<span class="heti-skip"><span class="heti-spacing"> </span>(<span class="heti-spacing"> </span></span>前后错开就不会重复<span><span class="heti-spacing"> </span>)</span>。</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>normal</th>
<th>ACK is lost or arrived after the timeout</th>
<th>Loss or damaged and retransmission</th>
<th>ACK arrived after the timeout</th>
</tr>
</thead>
<tbody>
<tr>
<td><img alt="image-20231017121649063" src="./计网.assets/image-20231017121649063.png" style="zoom:50%;"/></td>
<td><img alt="image-20231017121705175" src="./计网.assets/image-20231017121705175.png" style="zoom:50%;"/></td>
<td><img alt="image-20231017121725545" src="./计网.assets/image-20231017121725545.png" style="zoom:55%;"/></td>
<td><img alt="image-20231017121746672" src="./计网.assets/image-20231017121746672.png" style="zoom:50%;"/></td>
</tr>
</tbody>
</table>
<h4 id="sliding-window-protocols">Sliding Window Protocols</h4>
<ul>
<li><span>Piggybacking (<span class="heti-spacing"> </span></span>驮运<span><span class="heti-spacing"> </span>)</span>：<span>ACK<span class="heti-spacing"> </span></span>信号勾连在下一个即将发送的<span class="heti-skip"><span class="heti-spacing"> </span>data frame<span class="heti-spacing"> </span></span>上发送。</li>
</ul>
<p>在所有的<span class="heti-skip"><span class="heti-spacing"> </span>Sliding Window<span class="heti-spacing"> </span></span>协议中，<span>sender<span class="heti-spacing"> </span></span>会维护一组数据帧的序列号<span class="heti-skip"><span class="heti-spacing"> </span>(<span class="heti-spacing"> </span></span>落在<span class="heti-skip"><span class="heti-spacing"> </span>sending window<span class="heti-spacing"> </span></span>中<span><span class="heti-spacing"> </span>)</span>。发送端也会保留尚未确定、尚未发送的数据帧，因为这些数据可能会传输失败或损坏<span><span class="heti-spacing"> </span>(sender window)</span>。发送端存在一定大小的缓冲区，当缓冲区被填满时，数据链路层会关闭从网络层来的数据防止溢出<span><span class="heti-spacing"> </span>(Flow control)</span>。</p>
<p>接收端也有<span><span class="heti-spacing"> </span>receiving window</span>，只接受落在窗口中的数据帧并存入缓冲区，不落在窗口中的帧将被丢弃。如果序号等于窗口下沿的数据帧到达，会被传给网络层并将下沿加<span class="heti-skip"><span class="heti-spacing"> </span>1 (<span class="heti-spacing"> </span></span>旋转<span><span class="heti-spacing"> </span>1)</span>。如果窗口大小为<span><span class="heti-spacing"> </span>1</span>，则只会按顺序接受数据。</p>
<p><img alt="image-20231024102708527" src="./计网.assets/image-20231024102708527.png" style="zoom:33%;"/></p>
<p>有三种双向的协议：</p>
<ul>
<li><strong>A One-Bit Sliding Window Protocol (stop-and-wait)</strong>：<span>sending<span class="heti-spacing"> </span></span>和<span class="heti-skip"><span class="heti-spacing"> </span>receiving<span class="heti-spacing"> </span></span>的窗口大小均为<span><span class="heti-spacing"> </span>1</span>。序号只用<span class="heti-skip"><span class="heti-spacing"> </span>0<span class="heti-spacing"> </span></span>和<span class="heti-skip"><span class="heti-spacing"> </span>1<span class="heti-spacing"> </span></span>表示。</li>
</ul>
<p><img alt="image-20231024103010949" src="./计网.assets/image-20231024103010949.png" style="zoom:33%;"/></p>
<p>红线指未收到<span class="heti-skip"><span class="heti-spacing"> </span>ACK<span class="heti-spacing"> </span></span>进行了重发。<span>*<span class="heti-spacing"> </span></span>表示接收到了希望得到的数据帧并递交到网络层。对<span class="heti-skip"><span class="heti-spacing"> </span>A<span class="heti-spacing"> </span></span>左侧为<span><span class="heti-spacing"> </span>ACK</span>，右侧为序号，<span>B<span class="heti-spacing"> </span></span>则正好相反。</p>
<p><strong>A Protocol Using Go Back N</strong>：可以一次发送多帧数据不用等待<span><span class="heti-spacing"> </span>ACK</span>。需要解决两个问题：</p>
<ul>
<li>如果传输的一批数据帧中出现错误如何处理。</li>
<li>接收端如何处理剩下的正确的帧。</li>
</ul>
<p><img alt="image-20231024105635860" src="./计网.assets/image-20231024105635860.png" style="zoom:33%;"/></p>
<p>若接收端的窗口大小为<span><span class="heti-spacing"> </span>1</span>，<span>sender<span class="heti-spacing"> </span></span>发送了<span class="heti-skip"><span class="heti-spacing"> </span>0~8<span class="heti-spacing"> </span></span>帧，第<span class="heti-skip"><span class="heti-spacing"> </span>2<span class="heti-spacing"> </span></span>帧失效导致<span class="heti-skip"><span class="heti-spacing"> </span>3~8<span class="heti-spacing"> </span></span>帧丢失，需要重传<span class="heti-skip"><span class="heti-spacing"> </span>2 ~ 8<span class="heti-spacing"> </span></span>帧。</p>
<p><img alt="image-20231024105900361" src="./计网.assets/image-20231024105900361.png" style="zoom:33%;"/></p>
<p>若接收端的窗口大小<span><span class="heti-spacing"> </span>&gt; 1</span>，第<span class="heti-skip"><span class="heti-spacing"> </span>2<span class="heti-spacing"> </span></span>帧失效，继续接收<span class="heti-skip"><span class="heti-spacing"> </span>345<span class="heti-spacing"> </span></span>帧，会产生<span class="heti-skip"><span class="heti-spacing"> </span>ACK<span class="heti-spacing"> </span></span>的跳变。此处的<span class="heti-skip"><span class="heti-spacing"> </span>ACK<span class="heti-spacing"> </span></span>表示成功递交了几个数据帧。</p>
<ul>
<li><strong><span>Sliding Window Protocol Using Go Back N<span class="heti-spacing"> </span></span></strong><span>(revceiving window size<span class="heti-spacing"> </span></span>为<span><span class="heti-spacing"> </span>1)</span></li>
</ul>
<table>
<thead>
<tr>
<th><img alt="image-20231024110853179" src="./计网.assets/image-20231024110853179.png" style="zoom:33%;"/></th>
<th><img alt="image-20231024111047061" src="./计网.assets/image-20231024111047061.png" style="zoom:33%;"/></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<div class="highlight"><table class="highlighttable"><tr><th class="filename" colspan="2"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code>When the sender window of size = 7
    • The sender sends frames 0 through 6
    • A piggybacked acknowledgement for frame 6 eventually comes 
back to the sender
    • The sender sends another 7 frames:7,0,1,2,3,4,5,
        – Frame 7,0,1,2,3,4,5 belonging to the second batch get lost
        – Frame 7,0,1,2,3,4,5 belonging to the second batch arrive
    • Another piggybacked acknowledgement comes in, no 
ambiguity
    – Frame 7,0,1,2,3,4,5 belonging to the second batch get lost, 
      ack=6
    – Frame 7,0,1,2,3,4,5 belonging to the second batch arrive, 
      ack=5
</code></pre></div></td></tr></table></div>
<p><span>Go Back N<span class="heti-spacing"> </span></span>在出错率低的情况下工作尚可，但若出现错率高则需要大量的带宽用于重传。</p>
<ul>
<li><strong>A Sliding Window Protocol Using Selective Repeat </strong>(revceiving window size &gt; 1)</li>
</ul>
<p>未防止缓存占满导致死锁，设置辅助的<span class="heti-skip"><span class="heti-spacing"> </span>ack_timer<span class="heti-spacing"> </span></span>进行确认，发送一个独立的<span class="heti-skip"><span class="heti-spacing"> </span>ack<span class="heti-spacing"> </span></span>信号。</p>
<p><span class="arithmatex">\(sending\, window\,size=\frac{MAXSEQ + 1}{2}\)</span></p>
<h3 id="example-data-link-protocols">Example Data Link Protocols</h3>
<p>主要介绍<span class="heti-skip"><span class="heti-spacing"> </span>Point-to-Point<span class="heti-spacing"> </span></span>协议<span><span class="heti-spacing"> </span>(PPP)</span>。</p>
<ul>
<li>需要提供<span class="heti-skip"><span class="heti-spacing"> </span>framing<span class="heti-spacing"> </span></span>功能，区分数据帧的始末。</li>
<li>需要提供<strong><span><span class="heti-spacing"> </span>LCP</span></strong><span><span class="heti-spacing"> </span>(Link Control Protocol)</span>，对线路的使用进行控制，bring up / bring down / testing...。</li>
<li>
<p>需要提供<strong><span><span class="heti-spacing"> </span>NCP</span></strong><span><span class="heti-spacing"> </span>(Network Control Protocol)</span>，协调使用的网络层协议。</p>
</li>
<li>
<p><strong>Packet over SONET</strong></p>
</li>
</ul>
<p>一种物理层的协议。</p>
<p><img alt="image-20231024115431686" src="./计网.assets/image-20231024115431686.png" style="zoom:33%;"/></p>
<p>对应的<span class="heti-skip"><span class="heti-spacing"> </span>PPP frame<span class="heti-spacing"> </span></span>格式为：</p>
<p><img alt="image-20231024115451802" src="./计网.assets/image-20231024115451802.png" style="zoom:33%;"/></p>
<p>需要插入<span><span class="heti-spacing"> </span>ESC (0x7D = 0x7E xor 0x20</span>，<span>bit stuffing)<span class="heti-spacing"> </span></span>保证传输的正确。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <strong>Payload</strong> field is variable length, up to some negotiated maximum. (default length of 1500 bytes)
The <strong>Checksum</strong> field which normally is 2 bytes</p>
</div>
<p><img alt="image-20231024120221013" src="./计网.assets/image-20231024120221013.png" style="zoom:45%;"/></p>
<ul>
<li>**ADSL ** (Asymmetric Digital Subscriber Loop)</li>
</ul>
<p>一种物理层协议。</p>
<p><code>ATM</code>：ATM (Asynchronous Transfer Mode) is a link layer that is based on the transmission of fixed-length <strong>cells</strong> of information. </p>
<p><img alt="image-20231024120711425" src="./计网.assets/image-20231024120711425.png" style="zoom:33%;"/></p>
<p>对应的<span class="heti-skip"><span class="heti-spacing"> </span>AAL5 frame<span class="heti-spacing"> </span></span>的格式为：</p>
<p><img alt="image-20231024120855748" src="./计网.assets/image-20231024120855748.png" style="zoom:33%;"/></p>
<p>不需要地址标识符，<strong><span>the virtual circuit identifier<span class="heti-spacing"> </span></span></strong>会将数据帧带到指定的位置。此外：</p>
<ul>
<li>
<p>It has a trailer that gives length and has a 4-byte CRC for error detection. The CRC is the same one used for PPP and IEEE 802 LANs.</p>
</li>
<li>
<p>The payload of the AAL5 frame has padding to be a multiple of 48 bytes so that the frame can be evenly divided into cells.</p>
</li>
<li>
<p>The protocol field indicates to the DSLAM at the far end whether the payload is an IP packet or a packet from other protocol such as LCP.</p>
</li>
</ul>
<h2 id="mac-sublayer">MAC sublayer</h2>
<table>
<thead>
<tr>
<th><img alt="image-20231107121610791" src="./计网.assets/image-20231107121610791.png" style="zoom:33%;"/></th>
<th><img alt="image-20231107121637153" src="./计网.assets/image-20231107121637153.png" style="zoom:33%;"/></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<blockquote>
<p>2023 / 10 / 31</p>
</blockquote>
<h3 id="the-channel-allocation-problem">The Channel Allocation Problem</h3>
<h4 id="static-channel-allocation">Static channel allocation</h4>
<p>例如：<span>FDMA -<span class="heti-spacing"> </span></span>分频分配。</p>
<p>但存在问题：某一用户不使用时，信道就没有得到充分利用。需要<strong><span><span class="heti-spacing"> </span>Dynamic channel allocation</span></strong>。</p>
<ul>
<li>
<p>Preliminary Queueing Theory</p>
</li>
<li>
<p>系统最大速率为<span><span class="heti-spacing"> </span>C</span>。<span>R<span class="heti-spacing"> </span></span>表示需要的平均速率。</p>
</li>
<li>
<p>若<span class="heti-skip"><span class="heti-spacing"> </span>R &lt; C<span class="heti-spacing"> </span></span>系统可以处理。但若<span><span class="heti-spacing"> </span>R &gt; C</span>，则会产生一些问题。</p>
</li>
<li>
<p>排队理论中需要注意两个变量<strong><span><span class="heti-spacing"> </span>the arrival times</span></strong>、<strong>the service times</strong>。</p>
</li>
<li>
<p>对于第<span class="heti-skip"><span class="heti-spacing"> </span>n<span class="heti-spacing"> </span></span>位顾客 <span class="arithmatex">\(C_n\)</span>，<span class="arithmatex">\(\tau_n\)</span> 为<span><span class="heti-spacing"> </span>arrival time</span>，<span class="arithmatex">\(x_n\)</span> 为<span><span class="heti-spacing"> </span>service time</span>，interarrival time <span class="arithmatex">\(t_n = \tau_n - \tau_{n-1}\)</span>。</p>
</li>
<li>
<p><span class="arithmatex">\(\tilde{x}\)</span>、<span class="arithmatex">\(\tilde{t}\)</span> 表示随机变量。</p>
</li>
<li>
<p><span class="arithmatex">\(A(\tilde{t} \le t) = A(t)\)</span>，<span class="arithmatex">\(B(\tilde{x} \le x) = B(t)\)</span> 进行概率的表示。</p>
</li>
<li>
<p><span class="arithmatex">\(E(\tilde{t}) = 1 / \lambda\)</span>， <span class="arithmatex">\(E(\tilde{t}) = 1 / \mu\)</span>，其中 <span class="arithmatex">\(\lambda\)</span> 表示平均<span><span class="heti-spacing"> </span>arrival time</span>。</p>
</li>
<li>
<p>这个问题可以被描述为：A/B/m。其中<span class="heti-skip"><span class="heti-spacing"> </span>m<span class="heti-spacing"> </span></span>为服务器数量，<span>A<span class="heti-spacing"> </span></span>为<span class="heti-skip"><span class="heti-spacing"> </span>interarrival time<span class="heti-spacing"> </span></span>的分布，<span>B<span class="heti-spacing"> </span></span>为<span class="heti-skip"><span class="heti-spacing"> </span>service time<span class="heti-spacing"> </span></span>的分布。A，<span>B<span class="heti-spacing"> </span></span>有六种可能：</p>
</li>
</ul>
<p><img alt="image-20231031103735975" src="./计网.assets/image-20231031103735975.png" style="zoom:33%;"/></p>
<ul>
<li>
<p>对于<span><span class="heti-spacing"> </span>G/G/m</span>，定义 <span class="arithmatex">\(\rho\)</span> 为利用系数，有 <span class="arithmatex">\(\rho = \frac{\lambda \tilde{x}}{m}\)</span>，<span class="arithmatex">\(\rho\)</span> 越接近<span><span class="heti-spacing"> </span>1</span>，队列的等待时间越长。</p>
</li>
<li>
<p>有 <span class="arithmatex">\(T = \tilde{x} + W\)</span>，其中<span class="heti-skip"><span class="heti-spacing"> </span>W<span class="heti-spacing"> </span></span>为必定等待时间。</p>
</li>
<li>
<p>Little’s Result：<span class="arithmatex">\(\overline{N} = \lambda T\)</span>，The average queue size <span class="arithmatex">\(\overline{N}_q = \lambda W\)</span>，在<span class="heti-skip"><span class="heti-spacing"> </span>G/G/m<span class="heti-spacing"> </span></span>中，有 <span class="arithmatex">\(\overline{N}_q = \overline{N} - m\rho\)</span>。</p>
</li>
<li>
<p>对于<span class="heti-skip"><span class="heti-spacing"> </span>M/M/1<span class="heti-spacing"> </span></span>的情形，<span class="arithmatex">\(\lambda\)</span> 为泊松分布，有 <span class="arithmatex">\(T = \tilde{x} + W = 1 / \mu + \frac{\rho/\mu}{1-\rho} = \frac{1 / \mu}{1-\rho}\)</span>。</p>
</li>
<li>
<p>在容量为<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>的<span class="heti-skip"><span class="heti-spacing"> </span>FDMA<span class="heti-spacing"> </span></span>中有：</p>
</li>
</ul>
<p><img alt="image-20231031110615739" src="./计网.assets/image-20231031110615739.png" style="zoom:33%;"/></p>
<p>分频分为<span class="heti-skip"><span class="heti-spacing"> </span>N<span class="heti-spacing"> </span></span>份之后有：</p>
<p><img alt="image-20231031110658784" src="./计网.assets/image-20231031110658784.png" style="zoom:33%;"/></p>
<h4 id="dynamic-channel-allocation">Dynamic Channel Allocation</h4>
<p>有五点假设：<strong>Independent Traffic</strong>、<strong>Single Channel</strong>、<strong>Observable Collisions</strong>、<strong><span>Continuous or Slotted Time<span class="heti-spacing"> </span></span></strong><span>(<span class="heti-spacing"> </span></span>传输可以从任意时间开始，或只能从时钟间隔时开始<span><span class="heti-spacing"> </span>)</span>、<strong><span>Carrier Sense or No Carrier Sense<span class="heti-spacing"> </span></span></strong><span>(<span class="heti-spacing"> </span></span>可否判断信道是否繁忙<span><span class="heti-spacing"> </span>)</span>。</p>
<ul>
<li>
<p><strong>ALOHA</strong></p>
</li>
<li>
<p>用户向中央计算机发送数据，可以分为<span class="heti-skip"><span class="heti-spacing"> </span>pure<span class="heti-spacing"> </span></span>和<span class="heti-skip"><span class="heti-spacing"> </span>slotted<span class="heti-spacing"> </span></span>两种类型。</p>
</li>
<li>
<p>pure</p>
</li>
<li>
<p>中央计算机接收到某数据后，广播到所有的计算机，故计算机可以判断自己的帧是否已通过。</p>
</li>
<li>
<p>若某帧遭到了损毁，发送发等待一段随机的时间后重新发送。</p>
<p><img alt="image-20231031111654641" src="./计网.assets/image-20231031111654641.png" style="zoom:33%;"/></p>
</li>
<li>
<p>效率如何？</p>
<p><img alt="image-20231031112509638" src="./计网.assets/image-20231031112509638.png" style="zoom:33%;"/></p>
</li>
<li>
<p>slotted，将时间分为一段段时间间隔。<span>frame<span class="heti-spacing"> </span></span>发送只能间隔的起点发送。每隔一段时间向各个主机发送一个信号表示时间间隔的开始。</p>
</li>
</ul>
<p>由于<span class="heti-skip"><span class="heti-spacing"> </span>ALOHA<span class="heti-spacing"> </span></span>没有<span><span class="heti-spacing"> </span>carrier sense</span>，效率不高，容易产生<span><span class="heti-spacing"> </span>collision</span>。</p>
<ul>
<li><strong>1-persistent CSMA</strong></li>
<li>一旦<span class="heti-skip"><span class="heti-spacing"> </span>sender<span class="heti-spacing"> </span></span>检测到信道为空的话则立即发送数据。持续不断监测。</li>
<li><strong>Nonpersistent CSMA</strong></li>
<li>每隔一段随机的时间监测。</li>
<li><strong>p-persistent CSMA</strong></li>
<li>建立在<span class="heti-skip"><span class="heti-spacing"> </span>slotted<span class="heti-spacing"> </span></span>的基础之上。当<span class="heti-skip"><span class="heti-spacing"> </span>slot<span class="heti-spacing"> </span></span>空闲时，有一定的概率<span class="heti-skip"><span class="heti-spacing"> </span>(1-p)<span class="heti-spacing"> </span></span>延迟到下一个<span class="heti-skip"><span class="heti-spacing"> </span>slot<span class="heti-spacing"> </span></span>发送。有<span class="heti-skip"><span class="heti-spacing"> </span>p<span class="heti-spacing"> </span></span>的概率会发送。</li>
</ul>
<p><img alt="image-20231031114028847" src="./计网.assets/image-20231031114028847.png" style="zoom:33%;"/></p>
<p><span>Collision Detection<span class="heti-spacing"> </span></span>也可以提高效率。发送的过程中，同时也在检测<span class="heti-skip"><span class="heti-spacing"> </span>frame<span class="heti-spacing"> </span></span>的状态。若<span class="heti-skip"><span class="heti-spacing"> </span>frame<span class="heti-spacing"> </span></span>与初始状态发生改变，则可以说明产生了<span><span class="heti-spacing"> </span>collision</span>。以下为一些<strong><span><span class="heti-spacing"> </span>Collision Free Protocols</span></strong>：</p>
<ul>
<li><strong>A Bit-Map Protocol</strong> <strong>--</strong> <strong>Reservation Protocol</strong></li>
</ul>
<p><img alt="image-20231031115149723" src="./计网.assets/image-20231031115149723.png" style="zoom:33%;"/></p>
<ul>
<li>若要发送，<span>sender<span class="heti-spacing"> </span></span>在自己的<span class="heti-skip"><span class="heti-spacing"> </span>bit map<span class="heti-spacing"> </span></span>上的<span class="heti-skip"><span class="heti-spacing"> </span>bit<span class="heti-spacing"> </span></span>置<span><span class="heti-spacing"> </span>1</span>。</li>
<li>
<p>但<span class="heti-skip"><span class="heti-spacing"> </span>sender<span class="heti-spacing"> </span></span>多时，轮询时间长，开销大。</p>
</li>
<li>
<p><strong>Token Passing</strong></p>
</li>
<li>
<p>只有拿到令牌<span class="heti-skip"><span class="heti-spacing"> </span>token<span class="heti-spacing"> </span></span>之后，才能发送。<span>token<span class="heti-spacing"> </span></span>在不同的状态之间传递。</p>
</li>
</ul>
<p><img alt="image-20231031115456166" src="./计网.assets/image-20231031115456166.png" style="zoom:33%;"/></p>
<ul>
<li>
<p>一些站点需要将<span class="heti-skip"><span class="heti-spacing"> </span>token<span class="heti-spacing"> </span></span>拿出<span><span class="heti-spacing"> </span>token ring</span>。</p>
</li>
<li>
<p><strong>Binary Countdown</strong></p>
</li>
<li>
<p>希望发送信息的<span class="heti-skip"><span class="heti-spacing"> </span>sender<span class="heti-spacing"> </span></span>广播自己的<span><span class="heti-spacing"> </span>address</span>。地址之间进行<span class="heti-skip"><span class="heti-spacing"> </span>or<span class="heti-spacing"> </span></span>操作，级别最高的<span class="heti-skip"><span class="heti-spacing"> </span>sender<span class="heti-spacing"> </span></span>先发送。</p>
</li>
</ul>
<p>在<span class="heti-skip"><span class="heti-spacing"> </span>low load<span class="heti-spacing"> </span></span>的情况下需要追求低时延<span><span class="heti-spacing"> </span>(ALOHA</span>，collision sense)，<span>high load<span class="heti-spacing"> </span></span>的情况下需要追求高利用率<span><span class="heti-spacing"> </span>(Collision Free)</span>。</p>
<ul>
<li>
<p><strong>Limited-Contention Protocols</strong></p>
</li>
<li>
<p>结合了两种类型的协议的优势。</p>
</li>
<li>
<p>每个信道都以<span class="heti-skip"><span class="heti-spacing"> </span>p<span class="heti-spacing"> </span></span>的概率获取信道。若有<span class="heti-skip"><span class="heti-spacing"> </span>k<span class="heti-spacing"> </span></span>个<span><span class="heti-spacing"> </span>sender</span>，成功获取的概率为 <span class="arithmatex">\(kp(1-p)^{k-1}\)</span>。</p>
</li>
</ul>
<p><img alt="image-20231031120650339" src="./计网.assets/image-20231031120650339.png" style="zoom:33%;"/></p>
<ul>
<li>
<p>可以将<span class="heti-skip"><span class="heti-spacing"> </span>sender<span class="heti-spacing"> </span></span>分组，<span>group 0<span class="heti-spacing"> </span></span>争夺<span><span class="heti-spacing"> </span>slot 0</span>，<span>group 1<span class="heti-spacing"> </span></span>争夺<span class="heti-skip"><span class="heti-spacing"> </span>slot 1<span class="heti-spacing"> </span></span>等。</p>
</li>
<li>
<p><strong>The Adaptive Tree Walk Protocol</strong></p>
</li>
<li>
<p>基于<span><span class="heti-spacing"> </span>Limited-Contention Protocols</span>，进行以下的树状的分组：</p>
</li>
</ul>
<p><img alt="image-20231031121016365" src="./计网.assets/image-20231031121016365.png" style="zoom:33%;"/></p>
<ul>
<li>若产生<span class="heti-skip"><span class="heti-spacing"> </span>collision<span class="heti-spacing"> </span></span>分为两组，一组争夺下一个<span><span class="heti-spacing"> </span>slot</span>，另一组争夺后一个<span><span class="heti-spacing"> </span>slot</span>。</li>
</ul>
<h4 id="wireless-lan-protocols">Wireless LAN Protocols</h4>
<p>相比有线传输更加复杂。例如<span><span class="heti-spacing"> </span>A</span>、<span>C<span class="heti-spacing"> </span></span>同时向<span class="heti-skip"><span class="heti-spacing"> </span>B<span class="heti-spacing"> </span></span>发送数据，但<span class="heti-skip"><span class="heti-spacing"> </span>A<span class="heti-spacing"> </span></span>由于有感知的范围，无法检测<span><span class="heti-spacing"> </span>C</span>，从而发生<span><span class="heti-spacing"> </span>collision (The Hidden Terminal Problem)</span>。另一种情况，<span>C<span class="heti-spacing"> </span></span>向<span class="heti-skip"><span class="heti-spacing"> </span>D<span class="heti-spacing"> </span></span>发送，<span>B<span class="heti-spacing"> </span></span>向<span class="heti-skip"><span class="heti-spacing"> </span>A<span class="heti-spacing"> </span></span>发送，但是<span class="heti-skip"><span class="heti-spacing"> </span>BC<span class="heti-spacing"> </span></span>互相检测到发送状态，错误检测到了冲突<span><span class="heti-spacing"> </span>(The Exposed Terminal Problem)</span>。</p>
<table>
<thead>
<tr>
<th><img alt="image-20231031121820176" src="./计网.assets/image-20231031121820176.png" style="zoom:33%;"/></th>
<th><img alt="image-20231031121835935" src="./计网.assets/image-20231031121835935.png" style="zoom:35%;"/></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>此外，无线网络中<span class="heti-skip"><span class="heti-spacing"> </span>sender<span class="heti-spacing"> </span></span>发送数据时几乎不能接收信号<span><span class="heti-spacing"> </span>(Nodes Cannot Hear while Sending)</span>。</p>
<p>解决方案：<strong>MACA</strong></p>
<ol>
<li>
<p>A sender node transmits a <strong>RTS</strong> (Request-To-Send, with frame length)</p>
</li>
<li>
<p>The receiver replies with a <strong>CTS</strong> (Clear-To-Send, with frame length)</p>
</li>
<li>
<p>Sender transmits the frame while nodes hearing the CTS stay silent</p>
</li>
<li>Collisions on the RTS/CTS are still possible, but less likely.</li>
</ol>
<p><img alt="image-20231031122354105" src="./计网.assets/image-20231031122354105.png" style="zoom:33%;"/></p>
<table>
<thead>
<tr>
<th><img alt="image-20231031122608287" src="./计网.assets/image-20231031122608287.png" style="zoom:33%;"/></th>
<th><img alt="image-20231031122629500" src="./计网.assets/image-20231031122629500.png" style="zoom:33%;"/></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="ethernet">Ethernet</h3>
<h4 id="_21">帧结构</h4>
<p><img alt="image-20231107101122892" src="./计网.assets/image-20231107101122892.png" style="zoom:33%;"/></p>
<p>前导码<span><span class="heti-spacing"> </span>preamble</span>，8 bytes，用于发送端接收端时钟同步。前<span class="heti-skip"><span class="heti-spacing"> </span>7 bytes<span class="heti-spacing"> </span></span>为<span><span class="heti-spacing"> </span>10101010</span>，最后一个<span class="heti-skip"><span class="heti-spacing"> </span>byte<span class="heti-spacing"> </span></span>为帧开始界定符，为<span><span class="heti-spacing"> </span>10101011</span>。</p>
<p>源地址、目的地址此处均为<span class="heti-skip"><span class="heti-spacing"> </span>MAC<span class="heti-spacing"> </span></span>物理地址，<span>MAC<span class="heti-spacing"> </span></span>地址为<span><span class="heti-spacing"> </span>48 bits</span>，6 bytes。<span>MAC<span class="heti-spacing"> </span></span>地址全<span class="heti-skip"><span class="heti-spacing"> </span>1<span class="heti-spacing"> </span></span>为广播。<span>48 bits<span class="heti-spacing"> </span></span>中前<span class="heti-skip"><span class="heti-spacing"> </span>24<span class="heti-spacing"> </span></span>位为<span class="heti-skip"><span class="heti-spacing"> </span>IEEE<span class="heti-spacing"> </span></span>分配给网卡厂商，后<span class="heti-skip"><span class="heti-spacing"> </span>24<span class="heti-spacing"> </span></span>位为网卡厂商分配的特定的地址。</p>
<p>区分<span class="heti-skip"><span class="heti-spacing"> </span>DIX<span class="heti-spacing"> </span></span>和<span class="heti-skip"><span class="heti-spacing"> </span>IEEE 802.3<span class="heti-spacing"> </span></span>主要以<span class="heti-skip"><span class="heti-spacing"> </span>Type<span class="heti-spacing"> </span></span>和<span class="heti-skip"><span class="heti-spacing"> </span>length<span class="heti-spacing"> </span></span>为区分。<span>Type<span class="heti-spacing"> </span></span>指定了后续<span class="heti-skip"><span class="heti-spacing"> </span>Data<span class="heti-spacing"> </span></span>要交由何种协议处理，如<span class="heti-skip"><span class="heti-spacing"> </span>0x800<span class="heti-spacing"> </span></span>为<span><span class="heti-spacing"> </span>IPv4</span>。<span>length<span class="heti-spacing"> </span></span>则一定小于等于<span><span class="heti-spacing"> </span>0x600</span>。</p>
<p>数据为<span class="heti-skip"><span class="heti-spacing"> </span>46 ~ 1500 bytes (<span class="heti-spacing"> </span></span>包括<span class="heti-skip"><span class="heti-spacing"> </span>Data<span class="heti-spacing"> </span></span>和<span><span class="heti-spacing"> </span>pad)</span>。由于<span class="heti-skip"><span class="heti-spacing"> </span>CSMA / CD<span class="heti-spacing"> </span></span>算法的限制，除去前导码，以太网帧至少为<span><span class="heti-spacing"> </span>64 bytes</span>。</p>
<p>最后<span class="heti-skip"><span class="heti-spacing"> </span>4 bytes<span class="heti-spacing"> </span></span>为<span class="heti-skip"><span class="heti-spacing"> </span>CRC<span class="heti-spacing"> </span></span>校验码。</p>
<h4 id="performance">Performance</h4>
<p>假定恒定有<span class="heti-skip"><span class="heti-spacing"> </span>k<span class="heti-spacing"> </span></span>个<span class="heti-skip"><span class="heti-spacing"> </span>station<span class="heti-spacing"> </span></span>希望发送，一个<span class="heti-skip"><span class="heti-spacing"> </span>station<span class="heti-spacing"> </span></span>拿到信道的可能为<span><span class="heti-spacing"> </span>p</span>。</p>
<p>故信道被使用的概率为 <span class="arithmatex">\(A = kp(1-p)^{k-1}\)</span>，争用期落在<span class="heti-skip"><span class="heti-spacing"> </span>j<span class="heti-spacing"> </span></span>个<span class="heti-skip"><span class="heti-spacing"> </span>time slot<span class="heti-spacing"> </span></span>中的可能为 <span class="arithmatex">\(A(1-A)^{j-1}\)</span>。</p>
<p>故<span class="heti-skip"><span class="heti-spacing"> </span>time slot<span class="heti-spacing"> </span></span>的期望为 <span class="arithmatex">\(\sum^{+\infty}_{0}jA(1-A)^{j-1}=1/A\)</span>，若时间间隔为 <span class="arithmatex">\(2\tau\)</span>，争用期时间为 <span class="arithmatex">\(2\tau /A\)</span>。假设帧平均用<span class="heti-skip"><span class="heti-spacing"> </span>P<span class="heti-spacing"> </span></span>秒传输。则有：</p>
<div class="arithmatex">\[ channel \,\, efficiency = \frac{P}{P + 2\tau /A} \]</div>
<p>若 <span class="arithmatex">\(P = F /B\)</span>，<span>F<span class="heti-spacing"> </span></span>为<span class="heti-skip"><span class="heti-spacing"> </span>frame<span class="heti-spacing"> </span></span>长，<span>B<span class="heti-spacing"> </span></span>为带宽。有信道效率为 <span class="arithmatex">\(\frac{1}{1 + 2BLe/cF}\)</span>，<span>L<span class="heti-spacing"> </span></span>为线缆长度，<span>c<span class="heti-spacing"> </span></span>为光速，<span>A<span class="heti-spacing"> </span></span>为<span><span class="heti-spacing"> </span>1 / e</span>。</p>
<h4 id="_22">分类</h4>
<p>Hub：集线器，只是将几个线缆连接在一起，不增加容量。内部相当于一根<span class="heti-skip"><span class="heti-spacing"> </span>cable<span class="heti-spacing"> </span></span>的速率。会将数据输出到所有端口。</p>
<p>Switch：交换机，有<span><span class="heti-spacing"> </span>high-speed backplane</span>，连接所有端口。只需将数据输出到目的地端口。</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>交换机中每个端口有自己的碰撞域，但集线器中所有端口处于同一个碰撞域中。</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>以太网同时是物理层和数据链路层的规范。</p>
</div>
<p><strong>Fast Ethernet</strong>：允许通过集线器或交换机进行传输。</p>
<p><strong>Gigabit Ethernet</strong>：使用点对点来链路。分为全双工和半双工两种模式。</p>
<h3 id="80211-wifi">802.11 WiFi</h3>
<p>可以分为两种模式：In infrastructure mode，通过<span class="heti-skip"><span class="heti-spacing"> </span>AP<span class="heti-spacing"> </span></span>连接；Ad hoc network，分布式互联。</p>
<p><span>802.11<span class="heti-spacing"> </span></span>的数据链路层可以分为两个子层：</p>
<ul>
<li><strong>MAC</strong> (Medium Access Control) sublayer：分配信道；</li>
<li><strong>LLC</strong> (Logical Link Layer)：隐藏<span class="heti-skip"><span class="heti-spacing"> </span>802<span class="heti-spacing"> </span></span>协议的差异，向网络层封装。</li>
</ul>
<p>使用<span class="heti-skip"><span class="heti-spacing"> </span>2.4 Ghz<span class="heti-spacing"> </span></span>和<span class="heti-skip"><span class="heti-spacing"> </span>5 Ghz<span class="heti-spacing"> </span></span>进行传输。</p>
<h4 id="80211-mac-sublayer-protocol">802.11 MAC Sublayer Protocol</h4>
<p>难题：</p>
<ul>
<li>半双工：无法同时发送接收数据。</li>
<li>有限范围：有的站无法监测或无法避开。</li>
</ul>
<p>使用<strong><span class="heti-skip"><span class="heti-spacing"> </span>CSMA / CA<span class="heti-spacing"> </span></span></strong>协议：Channel sensing before sending；Exponential backoff after collision。</p>
<p><img alt="image-20231107111551972" src="./计网.assets/image-20231107111551972.png" style="zoom:33%;"/></p>
<p>相较于以太网，802.11：</p>
<ul>
<li><strong>starting backoffs early</strong> helps to avoid collision。</li>
<li><strong>acknowledgements</strong> are used to infer collision because collision cannot be detected。</li>
</ul>
<p>为消除哪个<span class="heti-skip"><span class="heti-spacing"> </span>station<span class="heti-spacing"> </span></span>正在发送数据的协议，<span>802.11<span class="heti-spacing"> </span></span>将信道传感分为<strong><span><span class="heti-spacing"> </span>physical</span></strong><strong><span><span class="heti-spacing"> </span>sensing</span></strong><span><span class="heti-spacing"> </span>and</span><strong><span><span class="heti-spacing"> </span>virtual sensing</span></strong>。</p>
<ul>
<li>
<p>Physical sensing：空闲则传输，冲突等待随机的时间后回退。用于传输<span><span class="heti-spacing"> </span>RTS</span>。</p>
</li>
<li>
<p>virtual sensing：</p>
</li>
<li>
<p>Scenario: A wants to send to B. C is a station within range of A. D is a station within range of B but not within range of A.</p>
<ul>
<li>C----A----B----D</li>
</ul>
</li>
<li>
<p>A sends <strong>RTS frame</strong> to B to request permission, B sends CTS frame back to grant permission. Then A sends data, and starts an ACK timer.</p>
</li>
<li>
<p>C receives RTS frame, assert virtual channel busy, indicated by <strong>NAV</strong>(Network Allocation Vector)</p>
</li>
<li>
<p>D hears CTS, assert NAV</p>
</li>
<li>
<p>Note: the NAV signals are <strong>NOT</strong> transmitted; they are just <strong>internal reminder</strong> to keep quiet for a certain period of time.</p>
</li>
</ul>
<p><strong>帧结构</strong></p>
<p><img alt="image-20231107112421261" src="./计网.assets/image-20231107112421261.png" style="zoom:33%;"/></p>
<p>前<span class="heti-skip"><span class="heti-spacing"> </span>30<span class="heti-spacing"> </span></span>字节为<span class="heti-skip"><span class="heti-spacing"> </span>MAC<span class="heti-spacing"> </span></span>首部。其中有<span class="heti-skip"><span class="heti-spacing"> </span>4<span class="heti-spacing"> </span></span>个<span class="heti-skip"><span class="heti-spacing"> </span>MAC<span class="heti-spacing"> </span></span>地址，第四个用于自组网络。根据<span class="heti-skip"><span class="heti-spacing"> </span>To DS<span class="heti-spacing"> </span></span>和<span class="heti-skip"><span class="heti-spacing"> </span>From DS<span class="heti-spacing"> </span></span>信号，三个地址分配如下：</p>
<table>
<thead>
<tr>
<th style="text-align: center;">To DS</th>
<th style="text-align: center;">From DS</th>
<th style="text-align: center;">1</th>
<th style="text-align: center;">2</th>
<th style="text-align: center;">3</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">接收<span class="heti-skip"><span class="heti-spacing"> </span>=<span class="heti-spacing"> </span></span>目的地址</td>
<td style="text-align: center;">发送<span class="heti-skip"><span class="heti-spacing"> </span>= AP<span class="heti-spacing"> </span></span>地址</td>
<td style="text-align: center;">源地址</td>
</tr>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">接收<span class="heti-skip"><span class="heti-spacing"> </span>=<span class="heti-spacing"> </span></span>目的地址</td>
<td style="text-align: center;">发送<span class="heti-skip"><span class="heti-spacing"> </span>=<span class="heti-spacing"> </span></span>源地址</td>
<td style="text-align: center;">目的地址</td>
</tr>
</tbody>
</table>
<p>帧主体不超过<span><span class="heti-spacing"> </span>2312 bytes</span>。</p>
<h3 id="data-link-layer-switching">Data Link Layer Switching</h3>
<ul>
<li>
<p>We can use bridges (or switches) to join multiple physical LANs into a single logical LAN.</p>
</li>
<li>
<p>We can also treat one physical LAN as multiple logical LANs, called <strong>VLANs</strong> (<strong>Virtual LANs</strong>)。</p>
</li>
</ul>
<h4 id="physical-lan">physical LAN</h4>
<p>Bridges examine the data link layer addresses to do routing, can transport IPv4, IPv6, AppleTalk, ATM, etc.</p>
<p><img alt="image-20231107113438176" src="./计网.assets/image-20231107113438176.png" style="zoom:33%;"/></p>
<div class="highlight"><table class="highlighttable"><tr><th class="filename" colspan="2"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>上图中 (b) 有几个碰撞域？
7 个 (Hub 所连的所一个，其余一个端口一个)
</code></pre></div></td></tr></table></div>
<p><span>Bridge<span class="heti-spacing"> </span></span>需要决定对帧进行传输还是丢弃。一个简单实现是建立一个哈希表，其中列出所有端口的每个可能的目标。</p>
<p>若初次连接，会使用<strong><span class="heti-skip"><span class="heti-spacing"> </span>flooding algorithm<span class="heti-spacing"> </span></span></strong>进行检测<span class="heti-skip"><span class="heti-spacing"> </span>(<span class="heti-spacing"> </span></span>除了源端口，所有端口都进行转发<span><span class="heti-spacing"> </span>)</span>：</p>
<ul>
<li>Every incoming frame for an unknown destination is output on all the ports to which the bridge is connected except the one it arrived on。</li>
<li>Once a destination is known, frames destined for it are put only on the proper port。</li>
</ul>
<p>网络结构是动态的，<span>bridge<span class="heti-spacing"> </span></span>会在哈希表中记录最新的帧的到达时间，定期清除长时间未使用的条目。</p>
<p><span>Bridge<span class="heti-spacing"> </span></span>会重新编写<span><span class="heti-spacing"> </span>header</span>。</p>
<p><img alt="image-20231107114740023" src="./计网.assets/image-20231107114740023.png" style="zoom:33%;"/></p>
<p><strong>Spanning Tree Bridges</strong></p>
<p>网络拓扑图中可能有回路，会造成问题。</p>
<p><img alt="image-20231107115020939" src="./计网.assets/image-20231107115020939.png" style="zoom:33%;"/></p>
<p>以<span class="heti-skip"><span class="heti-spacing"> </span>MAC<span class="heti-spacing"> </span></span>地址最低的<span class="heti-skip"><span class="heti-spacing"> </span>switch<span class="heti-spacing"> </span></span>为根节点，以离根的最短距离，建立<span><span class="heti-spacing"> </span>spanning tree</span>。</p>
<p><img alt="image-20231107115227935" src="./计网.assets/image-20231107115227935.png" style="zoom:33%;"/></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ol>
<li>所有交换机一开始均认为自己为<span><span class="heti-spacing"> </span>root</span></li>
<li>交换机定期向自己的邻居发送更新<span class="heti-skip"><span class="heti-spacing"> </span>(<span class="heti-spacing"> </span></span>自身<span><span class="heti-spacing"> </span>MAC</span>，根<span><span class="heti-spacing"> </span>MAC</span>，到根的距离<span><span class="heti-spacing"> </span>)</span></li>
<li>交换机会使用更短的距离</li>
</ol>
</div>
<table>
<thead>
<tr>
<th><img alt="image-20231107115742123" src="./计网.assets/image-20231107115742123.png" style="zoom:33%;"/></th>
<th><img alt="image-20231107115755175" src="./计网.assets/image-20231107115755175.png" style="zoom:33%;"/></th>
<th><img alt="image-20231107115807247" src="./计网.assets/image-20231107115807247.png" style="zoom:33%;"/></th>
<th><img alt="image-20231107115831957" src="./计网.assets/image-20231107115831957.png" style="zoom:33%;"/></th>
<th><img alt="image-20231107115902454" src="./计网.assets/image-20231107115902454.png" style="zoom:33%;"/></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ol>
<li><strong><span>Hub and Reapter<span class="heti-spacing"> </span></span></strong><span>(<span class="heti-spacing"> </span></span>清理、放大输入信号<span><span class="heti-spacing"> </span>)</span>：Physical layer</li>
<li><strong>Bridges and Switches</strong>：Data Link Layer</li>
<li><strong>Routers</strong>：Network Layer</li>
<li><strong>Gateways</strong>：Transmission Layer</li>
</ol>
</div>
<h4 id="vlan">VLAN</h4>
<p><img alt="image-20231107120743036" src="./计网.assets/image-20231107120743036.png" style="zoom:33%;"/></p>
<p>不同颜色代表属于不同的<span><span class="heti-spacing"> </span>VLAN</span>。<span>GW<span class="heti-spacing"> </span></span>等同于<span><span class="heti-spacing"> </span>vlan trunk</span>。</p>
<p>交换机实际上根据<span class="heti-skip"><span class="heti-spacing"> </span>vlan tag<span class="heti-spacing"> </span></span>进行转发。</p>
<p><strong><span>802.1Q<span class="heti-spacing"> </span></span>帧</strong></p>
<p><img alt="image-20231107121100415" src="./计网.assets/image-20231107121100415.png" style="zoom:33%;"/></p>
<p>转发过程根据<span class="heti-skip"><span class="heti-spacing"> </span>VLAN identifier (12 bits)<span class="heti-spacing"> </span></span>进行转发。可以决定<span class="heti-skip"><span class="heti-spacing"> </span>4096<span class="heti-spacing"> </span></span>个<span><span class="heti-spacing"> </span>vlan</span>。</p>
<h2 id="network-layer">Network Layer</h2>
<table>
<thead>
<tr>
<th><img alt="image-20231128105654681" src="./计网.assets/image-20231128105654681.png" style="zoom:33%;"/></th>
<th><img alt="image-20231128105841622" src="./计网.assets/image-20231128105841622.png" style="zoom:30%;"/></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<blockquote>
<p>2023 / 11 / 14</p>
</blockquote>
<h3 id="overview_1">Overview</h3>
<p>网络层主要考虑如何从发送端到接收端收发数据包，是最后一层考虑<span class="heti-skip"><span class="heti-spacing"> </span>end-to-end<span class="heti-spacing"> </span></span>传输的网络层。</p>
<h4 id="_23">网络层<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>路由器的功能</h4>
<p>每个路由器内部都有一个转发表，根据<span class="heti-skip"><span class="heti-spacing"> </span>packet<span class="heti-spacing"> </span></span>的信息决定转发的链路。</p>
<ul>
<li><span>forwarding (<span class="heti-spacing"> </span></span>转发，主要功能<span><span class="heti-spacing"> </span>)</span>：决定路由内部的接收转发接口。Forwarding refers the router-local action。</li>
<li><span>Routing (<span class="heti-spacing"> </span></span>建立转发表<span><span class="heti-spacing"> </span>)</span>：由路由协议决定路径。<span>Routing refers to the network-wide process (<span class="heti-spacing"> </span></span>分为中心化和分布式两种<span><span class="heti-spacing"> </span>)</span>。</li>
</ul>
<p><img alt="image-20231114100915437" src="./计网.assets/image-20231114100915437.png" style="zoom:33%;"/></p>
<p><span>Packet<span class="heti-spacing"> </span></span>在完全到达下一路由器之前会在路由器之中存储，并进行校验。若校验不通过将直接丢包。</p>
<h4 id="implementation-of-connectionless-service">Implementation of Connectionless Service</h4>
<p>数据包也称为<span><span class="heti-spacing"> </span>datagram</span>，在网络中独立传输。</p>
<p><img alt="image-20231114101432007" src="./计网.assets/image-20231114101432007.png" style="zoom:33%;"/></p>
<p>每个路由中都有一个动态变化的转发表。</p>
<p>每个数据包中都包含一个标识码，用于标识其属于哪个虚拟网络。</p>
<p><span>VC<span class="heti-spacing"> </span></span>只有在新的链路建立时才会更改转发表，而<span class="heti-skip"><span class="heti-spacing"> </span>Datagram<span class="heti-spacing"> </span></span>随时在变化。</p>
<p><img alt="image-20231114101804388" src="./计网.assets/image-20231114101804388.png" style="zoom:33%;"/></p>
<h3 id="_24">路由算法</h3>
<p>由两类路由算法：全局路由算法、分布式路由算法<span class="heti-skip"><span class="heti-spacing"> </span>(<span class="heti-spacing"> </span></span>不需要知道全局的网络拓扑结构<span><span class="heti-spacing"> </span>)</span>。也可以分为静态路由算法、动态路由算法。</p>
<p>可以参考以下网址👇</p>
<p><a href="https://blog.csdn.net/hanzhen7541/article/details/79032335?ops_request_misc=%7B%22request%5Fid%22%3A%22169993058016800188591587%22%2C%22scm%22%3A%2220140713.130102334.pc%5Fall.%22%7D&amp;request_id=169993058016800188591587&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~hot_rank-2-79032335-null-null.142^v96^pc_search_result_base2&amp;utm_term=路由算法&amp;spm=1018.2226.3001.4187">路由算法之距离矢量算法和链路状态算法<span class="heti-skip"><span class="heti-spacing"> </span>-CSDN<span class="heti-spacing"> </span></span>博客</a></p>
<h4 id="the-link-state-ls-routing-algorithm">the Link-State (LS) Routing Algorithm</h4>
<p>网络中的每个节点都需要掌握完全的网络拓扑信息。</p>
<ol>
<li>需要主动测试所有相邻节点的状态。</li>
<li>定期向链路中的节点传输链路的状态。</li>
</ol>
<p>当状态报文到达时，路由节点更新自己的网络拓扑和状态“视野图”，一般使用<span class="heti-skip"><span class="heti-spacing"> </span>Dijkstra<span class="heti-spacing"> </span></span>算法计算某一结点到所有节点的最短路径。</p>
<p>链路状态路由算法由三个重要的特征：</p>
<ol>
<li>向本系统中所有路由发送信息，使用<span class="heti-skip"><span class="heti-spacing"> </span>flooding<span class="heti-spacing"> </span></span>的方法。</li>
<li>发送的信息是路由器相邻的所有路由器的状态。</li>
<li>只有当链路的状态发生变化时，路由器才会向所有的路由发送信息。</li>
</ol>
<p><img alt="image-20231114104507605" src="./计网.assets/image-20231114104507605.png" style="zoom:33%;"/></p>
<p><span>LS<span class="heti-spacing"> </span></span>算法可能会存在震荡的问题。</p>
<h4 id="the-distance-vector-dv-routing-algorithm">The Distance Vector (DV) Routing Algorithm</h4>
<p>相比<span class="heti-skip"><span class="heti-spacing"> </span>LS<span class="heti-spacing"> </span></span>算法，<span>DV<span class="heti-spacing"> </span></span>不需要知道全局的拓扑结构。</p>
<p>采用迭代的方法进行链路计算，直到进行到没有信息需要更新为止。不要求所有节点同步。</p>
<p><strong>Bellman-Ford Equation</strong>：<span class="arithmatex">\(d_x(y) = min_v\{c(x, v)+d_y(v)\}\)</span></p>
<p><span class="arithmatex">\(d_x(y)\)</span> 指的是<span class="heti-skip"><span class="heti-spacing"> </span>x<span class="heti-spacing"> </span></span>节点到<span class="heti-skip"><span class="heti-spacing"> </span>y<span class="heti-spacing"> </span></span>节点最低成本的路径。上述方程会检查<span class="heti-skip"><span class="heti-spacing"> </span>x<span class="heti-spacing"> </span></span>的所有邻近节点。</p>
<p><span class="arithmatex">\(\boldsymbol{D}_x(y)=[D_x(y), y\,\,in\,\,N]\)</span> 是<span class="heti-skip"><span class="heti-spacing"> </span>x<span class="heti-spacing"> </span></span>到所有节点的最短距离组成的距离向量。 </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>例：<br/>
</p><div>
<table>
<th>
<tb><img alt="image-20231114112002801" src="./计网.assets/image-20231114112002801.png" style="zoom:50%;"/></tb>
<tb><img alt="image-20231114112032328" src="./计网.assets/image-20231114112032328.png" style="zoom:27%;"/></tb>
</th>
</table>
</div>
</div>
<p>可能存在<strong><span><span class="heti-spacing"> </span>The Count-to-Infinity Problem</span></strong>，<span>y<span class="heti-spacing"> </span></span>被告知由一条链路，但自己无法确定自己是否处在链路上。</p>
<p><img alt="image-20231114112329272" src="./计网.assets/image-20231114112329272.png" style="zoom:33%;"/></p>
<p>两种算法对比：</p>
<p><img alt="image-20231114112526811" src="./计网.assets/image-20231114112526811.png" style="zoom:33%;"/></p>
<h4 id="_25">层次路由</h4>
<p>将多个路由器划分为不同的组<span><span class="heti-spacing"> </span>regions</span>。其他区域的内部信息向本区域隐藏。可以缩小<span><span class="heti-spacing"> </span>forwaring table</span>。</p>
<p><img alt="image-20231114113358457" src="./计网.assets/image-20231114113358457.png" style="zoom:33%;"/></p>
<p>若一个网络中有<span class="heti-skip"><span class="heti-spacing"> </span>N<span class="heti-spacing"> </span></span>个路由器，最优的层级为 <span class="arithmatex">\(lnN\)</span>。</p>
<h4 id="_26">广播路由</h4>
<p><code>方式1</code>：向每个目的地发送一个副本数据包。效率较低，且源路由需要有所有的目的地的路径。</p>
<p><code>方式2</code>：Multidestination routing，每个数据包都包含目的地列表<span class="heti-skip"><span class="heti-spacing"> </span>(<span class="heti-spacing"> </span></span>多个目标<span><span class="heti-spacing"> </span>)</span>，到达一个路由器后，会为每个目的地生成一个新的副本，设置相应的路线。使用效率有所提高。</p>
<p><code>方式3</code>：<strong>Flooding</strong>，</p>
<ul>
<li><strong>Uncontrolled</strong>，简单地转发，效率较低，可能造成<span><span class="heti-spacing"> </span>Broadcast storm</span>。</li>
<li><strong>Sequence-number-controlled flooding</strong>，源节点向邻近节点发送自己的地址以及<span><span class="heti-spacing"> </span>broadcast sequence number</span>。每个节点维护一个它已经接收、复制和转发的每个广播数据包的源地址和序列号的列表。当一个节点接收到一个广播数据包时，它首先检查该数据包是否在此列表中。如果是，则丢弃包；如果不是，包被复制并转发给节点的所有邻邻近节点，重复该过程。</li>
<li><strong>Reverse path forwarding (RPF)</strong>，接收到广播包后会检查是否处于常用的广播链路上，是的话转发，不是的话丢弃。</li>
<li><strong>Spanning-Tree Broadcast</strong>，建立一颗展开树用于广播。</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Unicast - a single destination<br/>
Broadcast - to all destinations<br/>
Multicast - to a group of destinations<br/></p>
</div>
<h3 id="the-network-layer-in-the-internet">The network layer in the Internet</h3>
<h4 id="ip-protocol">IP Protocol</h4>
<p><img alt="image-20231114115233737" src="./计网.assets/image-20231114115233737.png" style="zoom:33%;"/></p>
<p>一定包含一个<span class="heti-skip"><span class="heti-spacing"> </span>header (<span class="heti-spacing"> </span></span>至少<span><span class="heti-spacing"> </span>20 bytes</span>，前<span class="heti-skip"><span class="heti-spacing"> </span>5<span class="heti-spacing"> </span></span>行<span><span class="heti-spacing"> </span>)</span>。<mark>网络当中字节的排列为大端。</mark></p>
<ul>
<li>Version：版本号，<span>IPv4<span class="heti-spacing"> </span></span>为<span><span class="heti-spacing"> </span>4</span>。</li>
<li>IHL (header length)：<span>header<span class="heti-spacing"> </span></span>有多长，若为<span class="heti-skip"><span class="heti-spacing"> </span>0xF<span class="heti-spacing"> </span></span>表示有<span class="heti-skip"><span class="heti-spacing"> </span>15<span class="heti-spacing"> </span></span>个<span><span class="heti-spacing"> </span>4 bytes</span>，所以<span class="heti-skip"><span class="heti-spacing"> </span>option<span class="heti-spacing"> </span></span>最多<span><span class="heti-spacing"> </span>40 bytes</span>。</li>
<li>Different Service (Type of Service)：前<span class="heti-skip"><span class="heti-spacing"> </span>6 bits<span class="heti-spacing"> </span></span>用于标识服务类，后两位用于表示拥塞控制。</li>
<li>Total Length：数据<span class="heti-skip"><span class="heti-spacing"> </span>+ header<span class="heti-spacing"> </span></span>一共可以多长，数据最长为<span><span class="heti-spacing"> </span>65515 = 65535 - 20</span>。</li>
<li>Identification：计数器，每次产生一个数据包就自增。若数据报的长度超过<span class="heti-skip"><span class="heti-spacing"> </span>MTU (Path Maximum Transmission Unit)<span class="heti-spacing"> </span></span>时，则必须分包，分包的标识与分包前一致，以便后续能重新组装。</li>
<li>DF：为<span class="heti-skip"><span class="heti-spacing"> </span>0<span class="heti-spacing"> </span></span>时允许分包。</li>
<li>MF：为<span class="heti-skip"><span class="heti-spacing"> </span>1<span class="heti-spacing"> </span></span>时表示后续还有分包，为<span class="heti-skip"><span class="heti-spacing"> </span>0<span class="heti-spacing"> </span></span>表示后续没有分包。</li>
<li>Fragment Offset：指定分包后在原数据中的相对位置。以<span class="heti-skip"><span class="heti-spacing"> </span>8 bytes<span class="heti-spacing"> </span></span>为单位进行偏移。</li>
<li><span>TTL (<span class="heti-spacing"> </span></span>生存时间<span><span class="heti-spacing"> </span>)</span>：可通过路由的最大数值，转发前会将其减<span><span class="heti-spacing"> </span>1</span>。</li>
<li>Protocal：需要上交何种协议处理。</li>
<li>
<p>Header checksum：由于<span class="heti-skip"><span class="heti-spacing"> </span>TTL<span class="heti-spacing"> </span></span>的更改，每次转发后<span class="heti-skip"><span class="heti-spacing"> </span>checksum<span class="heti-spacing"> </span></span>需要重新存储。</p>
</li>
<li>
<p>The maximum payloads of different networks</p>
</li>
<li>
<p>Ethernet - 1500 bytes</p>
</li>
<li>
<p>802.11 - 2272 bytes</p>
</li>
<li>
<p>IP - 65515 bytes</p>
</li>
<li>故数据可能会需要分包</li>
</ul>
<p><strong>Fragment</strong></p>
<p>有两种重组方式：</p>
<ul>
<li><strong>Transparent fragmentation</strong>：每个路由器接收到所有片段后才能重组，且数据包需要来到同一个路由器。</li>
<li><strong>Nontransparent fragmentation</strong>：片段只会在目标主机上重组。</li>
</ul>
<p><img alt="image-20231114122045224" src="./计网.assets/image-20231114122045224.png" style="zoom:33%;"/></p>
<p><img alt="image-20231114122158933" src="./计网.assets/image-20231114122158933.png" style="zoom:33%;"/></p>
<p>注意需要减去<span class="heti-skip"><span class="heti-spacing"> </span>header<span class="heti-spacing"> </span></span>的长度。每个包都需要加上<span><span class="heti-spacing"> </span>header</span>。</p>
<p>若不希望进行分包，则需要进行<span><span class="heti-spacing"> </span>path MTU discovery</span>。但这会带来一些时延。</p>
<p><img alt="image-20231114122459154" src="./计网.assets/image-20231114122459154.png" style="zoom:33%;"/></p>
<h4 id="ip-addressing">IP addressing</h4>
<p><span>IPv4<span class="heti-spacing"> </span></span>地址为<span><span class="heti-spacing"> </span>32 bit</span>。路由器用于连接不同的子网，一个接口对应一个<span class="heti-skip"><span class="heti-spacing"> </span>IP<span class="heti-spacing"> </span></span>地址。<span>IP<span class="heti-spacing"> </span></span>地址并不特指某一台主机，一般指某一接口。</p>
<p><img alt="image-20231121100211260" src="./计网.assets/image-20231121100211260.png" style="zoom:33%;"/></p>
<p><span>Prefix<span class="heti-spacing"> </span></span>实际指<strong>子网掩码</strong><span><span class="heti-spacing"> </span>subnet mask</span>。子网掩码也可以表示为<span class="heti-skip"><span class="heti-spacing"> </span>/N (/24<span class="heti-spacing"> </span></span>表示前缀长<span><span class="heti-spacing"> </span>24 bit)</span>。</p>
<p>若子网掩码长<span><span class="heti-spacing"> </span>32 bit</span>，该子网仅有一个地址。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>判定子网个数：<br/>
根据有几个孤岛来计算。</p>
</div>
<p><img alt="image-20231121101437423" src="./计网.assets/image-20231121101437423.png" style="zoom:33%;"/></p>
<p>上述例子中，对外只有一个<span class="heti-skip"><span class="heti-spacing"> </span>IP<span class="heti-spacing"> </span></span>地址，但内部可以重新分配。</p>
<p><strong>CIDR</strong> - Classless InterDomain Routing</p>
<p>若不进行分级，则会使<span class="heti-skip"><span class="heti-spacing"> </span>routing table<span class="heti-spacing"> </span></span>变得过于庞大。</p>
<p><span>CIDR<span class="heti-spacing"> </span></span>的设计核心如下：</p>
<ul>
<li>
<p><strong><span>Subnetting<span class="heti-spacing"> </span></span></strong><span>(<span class="heti-spacing"> </span></span>对外<span><span class="heti-spacing"> </span>): split IP prefixes</span></p>
</li>
<li>
<p><strong><span>Route aggregation<span class="heti-spacing"> </span></span></strong><span>(<span class="heti-spacing"> </span></span>对内<span><span class="heti-spacing"> </span>): combine multiple small prefixes into a single larger prefix.</span></p>
</li>
</ul>
<p><img alt="image-20231121102407118" src="./计网.assets/image-20231121102407118.png" style="zoom:33%;"/></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>例：<br/>
<img alt="image-20231121103341374" src="./计网.assets/image-20231121103341374.png" style="zoom:33%;"/><br/>
解答：<br/>
<img alt="image-20231121103948941" src="./计网.assets/image-20231121103948941.png" style="zoom:33%;"/></p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>主机全<span class="heti-skip"><span class="heti-spacing"> </span>0<span class="heti-spacing"> </span></span>的<span class="heti-skip"><span class="heti-spacing"> </span>ip<span class="heti-spacing"> </span></span>用于表示某一子网。<br/>
全 1 表示广播地址。<br/>
127.0.0.1 表示本机的地址。</p>
</div>
<p><strong>NAT</strong> - Network Address Translation</p>
<p>由于<span class="heti-skip"><span class="heti-spacing"> </span>IP<span class="heti-spacing"> </span></span>地址数量不足，可以使用<span class="heti-skip"><span class="heti-spacing"> </span>NAT<span class="heti-spacing"> </span></span>对外<span class="heti-skip"><span class="heti-spacing"> </span>(public)<span class="heti-spacing"> </span></span>封装，获得更多对内<span class="heti-skip"><span class="heti-spacing"> </span>(private)<span class="heti-spacing"> </span></span>的<span class="heti-skip"><span class="heti-spacing"> </span>IP<span class="heti-spacing"> </span></span>地址。</p>
<p>自外向内传播时，使用端口号区分不同的主机。端口号为应用层的概念。</p>
<p><img alt="image-20231121104532811" src="./计网.assets/image-20231121104532811.png" style="zoom:33%;"/></p>
<p><code>Ports</code>：额外的<span class="heti-skip"><span class="heti-spacing"> </span>16 bit<span class="heti-spacing"> </span></span>数据。其中<span class="heti-skip"><span class="heti-spacing"> </span>0  ~ 1023<span class="heti-spacing"> </span></span>保留用于特定的网络服务，如<span><span class="heti-spacing"> </span>Port 80</span>。</p>
<p>使用<span class="heti-skip"><span class="heti-spacing"> </span>NAT<span class="heti-spacing"> </span></span>回带来一些问题：</p>
<ol>
<li><span>port<span class="heti-spacing"> </span></span>本身不用作标识主机。</li>
<li><span>port<span class="heti-spacing"> </span></span>为应用层的概念，路由器为网络层的设备，理论上不能获取端口号。</li>
<li>扰乱了<span class="heti-skip"><span class="heti-spacing"> </span>end-to-end<span class="heti-spacing"> </span></span>的参数。</li>
<li>将<span class="heti-skip"><span class="heti-spacing"> </span>connectionless<span class="heti-spacing"> </span></span>的网络变为<span><span class="heti-spacing"> </span>connection-oriented</span>。</li>
<li>若提供<span class="heti-skip"><span class="heti-spacing"> </span>NAT<span class="heti-spacing"> </span></span>服务的路由出现故障，整个私域网络都将不能使用。</li>
</ol>
<p><strong>DHCP</strong> - Dynamic Host Configuration Protocol</p>
<p>动态配置网络。允许主机学习子网掩码、第一跳路由的地址。</p>
<p>是一个“即插即用”的协议：动态给主机分配地址，主机离开后回收地址。</p>
<p>是一个“client-server”的协议：每个子网都需要一个<span class="heti-skip"><span class="heti-spacing"> </span>DHCP<span class="heti-spacing"> </span></span>服务器，若不存在，则需要知道代理的路由器。</p>
<p>需要有以下四步完成：</p>
<ol>
<li>DHCP server discovery：</li>
<li>This is done using <strong>a DHCP discover message</strong>, which a client sends within a UDP packet to port <strong>67</strong>.</li>
<li>The UDP packet is encapsulated in an IP datagram with the <strong>broadcast</strong> destination IP address of 255.255.255.255 and a “this  host” source IP address of 0.0.0.0.</li>
<li>DHCP server offer(s)</li>
<li>A DHCP server receiving a DHCP discovery message responds to the client with <strong>a DHCP offer message</strong> that is <strong>broadcast</strong> to all nodes on the subnet.</li>
<li>Several DHCP servers can be present on the subnet, the client may choose from among several offers.</li>
<li>DHCP request</li>
<li>The newly arriving client will choose from among one or more server offers and respond to its selected offer with <strong>a DHCP</strong> <strong>request message</strong> echoing back the configuration parameters.</li>
<li>DHCP ACK</li>
<li>The server responds to the DHCP request message with <strong>a DHCP</strong> <strong>ACK message</strong>, confirming the requested parameters.</li>
</ol>
<p>收到<span class="heti-skip"><span class="heti-spacing"> </span>ACK<span class="heti-spacing"> </span></span>信号即说明完成分配。需要注意的是<span class="heti-skip"><span class="heti-spacing"> </span>DHCP<span class="heti-spacing"> </span></span>分配的<span class="heti-skip"><span class="heti-spacing"> </span>IP<span class="heti-spacing"> </span></span>地址会定期进行<span><span class="heti-spacing"> </span>renew</span>。</p>
<p>分配的流程如下图所示：</p>
<p><img alt="image-20231121110526857" src="./计网.assets/image-20231121110526857.png" style="zoom:33%;"/></p>
<p>均使用广播包进行分配。</p>
<h4 id="ipv6">IPv6</h4>
<p>使用<span class="heti-skip"><span class="heti-spacing"> </span>128 bit<span class="heti-spacing"> </span></span>地址。</p>
<p>与<span class="heti-skip"><span class="heti-spacing"> </span>IPv4<span class="heti-spacing"> </span></span>不兼容，但与其他的许多网络协议兼容；不允许分段、<span>header<span class="heti-spacing"> </span></span>更短、无<span><span class="heti-spacing"> </span>checksum</span>，以实现更快的处理。</p>
<p><img alt="image-20231121110853692" src="./计网.assets/image-20231121110853692.png" style="zoom:33%;"/></p>
<p><span>Hop limit<span class="heti-spacing"> </span></span>相当于<span><span class="heti-spacing"> </span>TTL</span>。<span>Next Header<span class="heti-spacing"> </span></span>用于指明传输层的协议。</p>
<p><span>IPv6<span class="heti-spacing"> </span></span>地址可以压缩全<span class="heti-skip"><span class="heti-spacing"> </span>0<span class="heti-spacing"> </span></span>的部分：</p>
<p><img alt="image-20231121111433974" src="./计网.assets/image-20231121111433974.png" style="zoom:33%;"/></p>
<p><span>IPv4<span class="heti-spacing"> </span></span>也可以改为<span><span class="heti-spacing"> </span>IPv6</span>：</p>
<p><img alt="image-20231121111502917" src="./计网.assets/image-20231121111502917.png" style="zoom:33%;"/></p>
<h4 id="control-protocol">Control Protocol</h4>
<p><strong>ICMP</strong> - Internet Control Message Protocol</p>
<p>常用于报告错误信息。</p>
<p>常被认为是<span class="heti-skip"><span class="heti-spacing"> </span>IP<span class="heti-spacing"> </span></span>的一部分，但实际上在<span class="heti-skip"><span class="heti-spacing"> </span>IP<span class="heti-spacing"> </span></span>协议之上。在<span class="heti-skip"><span class="heti-spacing"> </span>IP<span class="heti-spacing"> </span></span>的数据报中被传输。</p>
<p><img alt="image-20231121112404905" src="./计网.assets/image-20231121112404905.png" style="zoom:33%;"/></p>
<p>例如进行<span class="heti-skip"><span class="heti-spacing"> </span>ping<span class="heti-spacing"> </span></span>指令时，<span>request<span class="heti-spacing"> </span></span>发送<span class="heti-skip"><span class="heti-spacing"> </span>type 8 code 0<span class="heti-spacing"> </span></span>的信息，<span>reply<span class="heti-spacing"> </span></span>发送<span><span class="heti-spacing"> </span>type 0 code 0</span>。</p>
<p><strong>ARP</strong> - The Address Resolution Protocol</p>
<p>如何将<span class="heti-skip"><span class="heti-spacing"> </span>IP<span class="heti-spacing"> </span></span>层的地址映射到数据链路层上。</p>
<p>查询子网上的所有其他节点，确定<span class="heti-skip"><span class="heti-spacing"> </span>IP<span class="heti-spacing"> </span></span>地址对应的<span class="heti-skip"><span class="heti-spacing"> </span>MAC<span class="heti-spacing"> </span></span>地址。</p>
<p><span>ARP<span class="heti-spacing"> </span></span>首先使用一个广播包进行查询，<span>MAC<span class="heti-spacing"> </span></span>地址首先设为全<span><span class="heti-spacing"> </span>1</span>。目的地的<span class="heti-skip"><span class="heti-spacing"> </span>MAC<span class="heti-spacing"> </span></span>初始化为全<span><span class="heti-spacing"> </span>0</span>。</p>
<p>为加速传输，会使用<span class="heti-skip"><span class="heti-spacing"> </span>cache<span class="heti-spacing"> </span></span>策略，在<span class="heti-skip"><span class="heti-spacing"> </span>node<span class="heti-spacing"> </span></span>上建立<span><span class="heti-spacing"> </span>ARP table</span>。当设备配置新的<span class="heti-skip"><span class="heti-spacing"> </span>IP<span class="heti-spacing"> </span></span>地址时，会使用<span class="heti-skip"><span class="heti-spacing"> </span>Gratuitous ARP<span class="heti-spacing"> </span></span>包来寻找自己的<span class="heti-skip"><span class="heti-spacing"> </span>IP<span class="heti-spacing"> </span></span>地址。</p>
<p>使用<span class="heti-skip"><span class="heti-spacing"> </span>default gateway<span class="heti-spacing"> </span></span>来加速：</p>
<ul>
<li>
<p>Step 1: If host 1 does not know the MAC address of the default gateway (router) with the IP address (192.32.65.1), it discovers it by sending an ARP broadcasting packet, and find the MAC address (the Ethernet address) of the default gateway is E3.</p>
</li>
<li>
<p>Step 2: Host 1 sends a frame (Src 192.32.65.7, E1; Dst 192.32.63.8, E3) to <strong>the default gateway</strong>. When the router gets this frame, it gives the packet to the IP software. It knows from the network masks that the packet should be sent onto the EE network where it will reach host 4.</p>
</li>
<li>
<p>Step 3: If the router does not know the MAC address of host 4, it will use ARP again (The MAC address of host 4 is E6).</p>
</li>
<li>
<p>Step 4: The router sends a frame (Src 192.32.65.7, E4; Dst192.32.63.8, E6)</p>
</li>
</ul>
<p><img alt="image-20231121120138356" src="./计网.assets/image-20231121120138356.png" style="zoom:33%;"/></p>
<p><span>MAC<span class="heti-spacing"> </span></span>地址随着每个网络上的帧而变化，而<span class="heti-skip"><span class="heti-spacing"> </span>IP<span class="heti-spacing"> </span></span>地址保持不变（因为它们表示所有互联网络上的端点）。</p>
<p>上述的网络也可以使用<span><span class="heti-spacing"> </span>Proxy ARP</span>：</p>
<ul>
<li>
<p>It is also possible to send a packet from host 1 to host 4 without host 1 knowing that host 4 is on a different network.</p>
</li>
<li>
<p>The solution is to have the router answer ARPs on the CS network for host 4 and give its MAC address, E3, as the response.</p>
</li>
<li>
<p>It is not possible to have host 4 reply directly because it will not see the ARP request (as <strong>routers do not forward</strong> <strong>Ethernet-level broadcasts</strong>). The router will then receive frames sent to 192.32.63.8 and forward them onto the EE network.</p>
</li>
</ul>
<h4 id="routing-protocol">Routing Protocol</h4>
<p><strong>Autonomous System</strong></p>
<p>单一技术管理下的一组路由器，相互连通。</p>
<p>自治系统内部的路由选择为域内路由选择，使用内部网关协议<span><span class="heti-spacing"> </span>(IGP</span>：RIP、OSPF)。</p>
<p>自治系统之间的路由选择为域间路由选择，使用外部网关协议<span><span class="heti-spacing"> </span>(EGP</span>：BGP)。</p>
<p><strong><span>RIP<span class="heti-spacing"> </span></span>路由信息协议</strong></p>
<p>基于<span class="heti-skip"><span class="heti-spacing"> </span>DV<span class="heti-spacing"> </span></span>算法实现。此处将路由器之间的距离定义为跳数<span><span class="heti-spacing"> </span>(Hop count)</span>。</p>
<p>允许的最大的跳数为<span><span class="heti-spacing"> </span>15</span>，故其只适用于小型网路。</p>
<p>每隔<span class="heti-skip"><span class="heti-spacing"> </span>30<span class="heti-spacing"> </span></span>秒两个路由器之间进行一次广播，更新信息。</p>
<p>默认的无效时间为<span><span class="heti-spacing"> </span>180s</span>，超过该时间仍未收到信息，则将该路由路径设置为无效，认为不可达，但仍在路由表中。超过<span class="heti-skip"><span class="heti-spacing"> </span>240s<span class="heti-spacing"> </span></span>后将被清除。</p>
<p>不支持带子网掩码的广播，故<span class="heti-skip"><span class="heti-spacing"> </span>RIP<span class="heti-spacing"> </span></span>网络中所有的子网掩码应该相同。</p>
<p><span>RIP<span class="heti-spacing"> </span></span>网络的特点如下：</p>
<ul>
<li>仅和相邻的路由器交换信息。</li>
<li>交换的内容是路由器的路由表。</li>
<li>按照固定的时长进行交换。</li>
</ul>
<p><strong><span>OSPF<span class="heti-spacing"> </span></span>开放式最短路由优先协议</strong></p>
<p>基于<span class="heti-skip"><span class="heti-spacing"> </span>LS<span class="heti-spacing"> </span></span>算法实现。使用广播<span class="heti-skip"><span class="heti-spacing"> </span>+ dijkstra<span class="heti-spacing"> </span></span>算法实现。</p>
<p><span>OSPF<span class="heti-spacing"> </span></span>中计算<span class="heti-skip"><span class="heti-spacing"> </span>cost<span class="heti-spacing"> </span></span>与传输的<span class="heti-skip"><span class="heti-spacing"> </span>data rate<span class="heti-spacing"> </span></span>有关，速率越高，<span>cost<span class="heti-spacing"> </span></span>越低。</p>
<p><img alt="image-20231124193328802" src="./计网.assets/image-20231124193328802.png" style="zoom:25%;"/></p>
<p>若网络较大，<span>OSPF<span class="heti-spacing"> </span></span>允许将一个<span class="heti-skip"><span class="heti-spacing"> </span>AS<span class="heti-spacing"> </span></span>分为多个区域。其中包含一个主干<span><span class="heti-spacing"> </span>area (area 0)</span>。其中的路由器均为主干路由器，其他的区域都要和该区域直连或建立相应的虚拟链路。其余<span class="heti-skip"><span class="heti-spacing"> </span>area<span class="heti-spacing"> </span></span>之间要进行通讯必须经过主干网。</p>
<p><strong>ABR</strong> (area border router)：至少与两个<span class="heti-skip"><span class="heti-spacing"> </span>area<span class="heti-spacing"> </span></span>相连的路由器。</p>
<p><span>OSPF<span class="heti-spacing"> </span></span>中所有路由器的<span class="heti-skip"><span class="heti-spacing"> </span>link state database<span class="heti-spacing"> </span></span>都是相同的。要实现这一点，路由器之间直接建立邻接关系较为低效，一个<span class="heti-skip"><span class="heti-spacing"> </span>area<span class="heti-spacing"> </span></span>中会选定一个<span class="heti-skip"><span class="heti-spacing"> </span>designed router<span class="heti-spacing"> </span></span>用以代表该<span class="heti-skip"><span class="heti-spacing"> </span>area<span class="heti-spacing"> </span></span>中的<span><span class="heti-spacing"> </span>link state database</span>，此外还会选定一个备份的路由器增加可靠性。</p>
<p><strong>BGP - The Exterior Gateway Routing Protocol</strong></p>
<p>在<span class="heti-skip"><span class="heti-spacing"> </span>AS<span class="heti-spacing"> </span></span>级别上选择路径，在<strong><span class="heti-skip"><span class="heti-spacing"> </span>semipermanent TCP connections<span class="heti-spacing"> </span></span></strong>上使用<span class="heti-skip"><span class="heti-spacing"> </span>179<span class="heti-spacing"> </span></span>端口传递信息。</p>
<p><img alt="image-20231128100428430" src="./计网.assets/image-20231128100428430.png" style="zoom:33%;"/></p>
<p><span>BGP<span class="heti-spacing"> </span></span>中每一个<span class="heti-skip"><span class="heti-spacing"> </span>AS<span class="heti-spacing"> </span></span>都有一个全局的特有的识别码<span><span class="heti-spacing"> </span>(ASN)</span>。</p>
<p><span>BGP<span class="heti-spacing"> </span></span>的前缀及其属性被称为路由，并会向其余路由进行广播。</p>
<p><span>Route advertisement<span class="heti-spacing"> </span></span>包括<span><span class="heti-spacing"> </span>IP prefix</span>、AS-path、next Hop。接收时会检查<span class="heti-skip"><span class="heti-spacing"> </span>AS-path<span class="heti-spacing"> </span></span>是否有重复，有则说明环路，<span>advertisement<span class="heti-spacing"> </span></span>需要丢弃。</p>
<p><img alt="image-20231128101010879" src="./计网.assets/image-20231128101010879.png" style="zoom:33%;"/></p>
<p><span>AS-path<span class="heti-spacing"> </span></span>与数据传输的方向相反。</p>
<p><img alt="image-20231128102851159" src="./计网.assets/image-20231128102851159.png" style="zoom:33%;"/></p>
<p>有关<span class="heti-skip"><span class="heti-spacing"> </span>MPLS<span class="heti-spacing"> </span></span>的介绍如下 👇</p>
<p><a href="https://blog.csdn.net/keith6785753/article/details/107058276?ops_request_misc=%7B%22request%5Fid%22%3A%22170113830416800186553353%22%2C%22scm%22%3A%2220140713.130102334.pc%5Fall.%22%7D&amp;request_id=170113830416800186553353&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~hot_rank-2-107058276-null-null.142^v96^pc_search_result_base2&amp;utm_term=mpls&amp;spm=1018.2226.3001.4187"><span>MPLS<span class="heti-spacing"> </span></span>协议基本知识总结<span class="heti-skip"><span class="heti-spacing"> </span>-CSDN<span class="heti-spacing"> </span></span>博客</a></p>
<p>多播。。。未完待续</p>
<h2 id="transport-layer">Transport Layer</h2>
<blockquote>
<p>2023 / 11 / 28</p>
</blockquote>
<h3 id="overview_2">Overview</h3>
<p>传输层需要实现<span class="heti-skip"><span class="heti-spacing"> </span>end-to-end<span class="heti-spacing"> </span></span>端到端的可靠传输。</p>
<p><img alt="image-20231128110417468" src="./计网.assets/image-20231128110417468.png" style="zoom:33%;"/></p>
<p><span>Transport address<span class="heti-spacing"> </span></span>是<span class="heti-skip"><span class="heti-spacing"> </span>IP<span class="heti-spacing"> </span></span>地址与端口号的组合。传输层的数据格式为<span><span class="heti-spacing"> </span>Segment</span>。</p>
<h4 id="transport-services">Transport Services</h4>
<p>分为两类：</p>
<ul>
<li>面向链接<span><span class="heti-spacing"> </span>Connection-oriented transport service</span>。需要经过建立、传输、释放三个过程。</li>
<li>无连接传输。</li>
</ul>
<p>传输层与网络层服务的区别如下：</p>
<ul>
<li>传输层的代码运行在主机<span class="heti-skip"><span class="heti-spacing"> </span>(OS)<span class="heti-spacing"> </span></span>上；网络层运行在路由器上，用户没有对于网络的实际控制权。</li>
<li>网络层服务可靠性较差。</li>
<li>传输层协议提高了网络层协议服务的质量。</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><img alt="image-20231128111359916" src="./计网.assets/image-20231128111359916.png" style="zoom:33%;"/><br/>
传输层、网络层、数据链路层的数据格式</p>
</div>
<h3 id="udp">UDP</h3>
<p>一种无连接的传输协议。</p>
<p><img alt="image-20231128111536384" src="./计网.assets/image-20231128111536384.png" style="zoom:33%;"/></p>
<p>一共有<span class="heti-skip"><span class="heti-spacing"> </span>8<span class="heti-spacing"> </span></span>字节的<span><span class="heti-spacing"> </span>header</span>。</p>
<p>由于<span class="heti-skip"><span class="heti-spacing"> </span>UDP length<span class="heti-spacing"> </span></span>有<span class="heti-skip"><span class="heti-spacing"> </span>16<span class="heti-spacing"> </span></span>位，<span>UDP<span class="heti-spacing"> </span></span>包的最大长度为 <span class="arithmatex">\(2^{16}-1\,bytes\)</span></p>
<p>其中<span class="heti-skip"><span class="heti-spacing"> </span>checksum<span class="heti-spacing"> </span></span>可选，其主要检查了<span><span class="heti-spacing"> </span>header</span>，<span>data<span class="heti-spacing"> </span></span>以及一个<span><span class="heti-spacing"> </span>conceptual IP pseudoheader</span>。在计算<span class="heti-skip"><span class="heti-spacing"> </span>checksum<span class="heti-spacing"> </span></span>时若<span class="heti-skip"><span class="heti-spacing"> </span>data<span class="heti-spacing"> </span></span>的长度为奇数，则会使用全<span class="heti-skip"><span class="heti-spacing"> </span>0<span class="heti-spacing"> </span></span>的<span class="heti-skip"><span class="heti-spacing"> </span>bytes<span class="heti-spacing"> </span></span>填充为偶数长度。</p>
<ul>
<li>The IPv4 pseudoheader：包括网络层中的目标<span class="heti-skip"><span class="heti-spacing"> </span>IP<span class="heti-spacing"> </span></span>和源<span><span class="heti-spacing"> </span>IP</span>、<span>UDP<span class="heti-spacing"> </span></span>的<span><span class="heti-spacing"> </span>protocol number (17)</span>、包括了<span class="heti-skip"><span class="heti-spacing"> </span>header<span class="heti-spacing"> </span></span>的<span><span class="heti-spacing"> </span>UDP length</span>。</li>
<li><img alt="image-20231128112448668" src="./计网.assets/image-20231128112448668.png" style="zoom:33%;"/></li>
</ul>
<p><span>UDP<span class="heti-spacing"> </span></span>可以完成的功能：</p>
<ul>
<li>使用<span class="heti-skip"><span class="heti-spacing"> </span>ports<span class="heti-spacing"> </span></span>进行多进程复用。</li>
<li>使用<span class="heti-skip"><span class="heti-spacing"> </span>checksum<span class="heti-spacing"> </span></span>进行<span class="heti-skip"><span class="heti-spacing"> </span>end-to-end<span class="heti-spacing"> </span></span>的错误检测。</li>
</ul>
<p>不能完成的功能：</p>
<ul>
<li>Flow control, congestion control, or retransmission upon receipt of a bad segment.</li>
</ul>
<p>使用<span class="heti-skip"><span class="heti-spacing"> </span>UDP<span class="heti-spacing"> </span></span>协议的应用层协议有<span><span class="heti-spacing"> </span>DNS</span>、SSDP。</p>
<h3 id="rtp">RTP</h3>
<p>Real-Time Transport Protocol，为传输层协议，但是在应用层中实现。</p>
<p><img alt="image-20231128113518218" src="./计网.assets/image-20231128113518218.png" style="zoom:33%;"/></p>
<p><span>RTP<span class="heti-spacing"> </span></span>的基本功能是将多个实时数据流复用到单个<span class="heti-skip"><span class="heti-spacing"> </span>UDP<span class="heti-spacing"> </span></span>数据包流上。<span>UDP<span class="heti-spacing"> </span></span>流可以发送到单个目的地（单播）或发送到多个目的地（多播）。</p>
<p>传输过程中可能出现延迟丢包等，解决方式是对<span class="heti-skip"><span class="heti-spacing"> </span>RTP stream<span class="heti-spacing"> </span></span>中每一个<span class="heti-skip"><span class="heti-spacing"> </span>packet<span class="heti-spacing"> </span></span>都新增一个递增的数字。<span>RTP<span class="heti-spacing"> </span></span>没有确认的过程。</p>
<p><span>RTP<span class="heti-spacing"> </span></span>可能包含多种格式的数据，需要使用合适的编码。</p>
<p>每个数据包与时间戳相关联，并进行少量的缓存。</p>
<p><img alt="image-20231128114136335" src="./计网.assets/image-20231128114136335.png" style="zoom:33%;"/></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><span>UDP<span class="heti-spacing"> </span></span>常用于实时传输</p>
</div>
<h3 id="tcp">TCP</h3>
<p>旨在在不可靠的网络链路上建立可靠的端到端的传输。</p>
<p>由于网络有不同的特性，<span>TCP<span class="heti-spacing"> </span></span>需要进行动态地适应，并具备一定地鲁棒性。</p>
<p><span>TCP<span class="heti-spacing"> </span></span>服务由发送端和接收端创建<span class="heti-skip"><span class="heti-spacing"> </span>socket<span class="heti-spacing"> </span></span>建立。</p>
<p>每个<span class="heti-skip"><span class="heti-spacing"> </span>socket<span class="heti-spacing"> </span></span>都包含<span><span class="heti-spacing"> </span>socket address</span>，包含主机<span class="heti-skip"><span class="heti-spacing"> </span>IP<span class="heti-spacing"> </span></span>地址以及端口号。</p>
<p><mark><span>TCP<span class="heti-spacing"> </span></span>是全双工的点对点的传输协议，不能进行多播或广播。</mark></p>
<h4 id="tcp-service-model">TCP Service Model</h4>
<ul>
<li>应用数据到达时，可以选择马上发送<span class="heti-skip"><span class="heti-spacing"> </span>(PUSH == 1)<span class="heti-spacing"> </span></span>或进行缓冲。</li>
<li>有优先级的数据包到达时，优先处理<span><span class="heti-spacing"> </span>(URGENT == 1)</span>。</li>
</ul>
<p>各类协议对于的端口号如下：</p>
<p><img alt="image-20231128115109503" src="./计网.assets/image-20231128115109503.png" style="zoom:33%;"/></p>
<p><span>TCP<span class="heti-spacing"> </span></span>中使用的数据格式为<span><span class="heti-spacing"> </span>segment</span>，有<span class="heti-skip"><span class="heti-spacing"> </span>20<span class="heti-spacing"> </span></span>字节的<span><span class="heti-spacing"> </span>header</span>，<span>IP payload<span class="heti-spacing"> </span></span>最大为<span class="arithmatex">\(65535-20=65515\,bytes\)</span><span class="heti-skip"><span class="heti-spacing"> </span>(<span class="heti-spacing"> </span></span>实际的<span class="heti-skip"><span class="heti-spacing"> </span>payload<span class="heti-spacing"> </span></span>还需要减去<span class="heti-skip"><span class="heti-spacing"> </span>20<span class="heti-spacing"> </span></span>字节的<span><span class="heti-spacing"> </span>IP header)</span>。Each link has an MTU (Maximum Transfer Unit)。<span>Header<span class="heti-spacing"> </span></span>之后还可能有一些<span><span class="heti-spacing"> </span>option</span>。</p>
<p><span>TCP<span class="heti-spacing"> </span></span>协议使用动态窗口大小的华东窗口协议。</p>
<p><span>TCP connection<span class="heti-spacing"> </span></span>中，每一个字节都有一个<span class="heti-skip"><span class="heti-spacing"> </span>32<span class="heti-spacing"> </span></span>位的序列号。</p>
<h4 id="header">Header</h4>
<p><img alt="image-20231128115726814" src="./计网.assets/image-20231128115726814.png" style="zoom:33%;"/></p>
<p>不包含任何数据的<span class="heti-skip"><span class="heti-spacing"> </span>TCP segment<span class="heti-spacing"> </span></span>合法，主要用于<span class="heti-skip"><span class="heti-spacing"> </span>acknowledgements<span class="heti-spacing"> </span></span>和<span><span class="heti-spacing"> </span>control messages</span>。</p>
<p>The <strong>Acknowledgement number</strong> specifies the next in-order byte expected, not the last byte correctly received。</p>
<p><strong>CWR</strong> &amp; <strong>ECE</strong>：当<span class="heti-skip"><span class="heti-spacing"> </span>ECN (Explicit Congestion Notification)<span class="heti-spacing"> </span></span>启用时用到。</p>
<ul>
<li><span>ECE<span class="heti-spacing"> </span></span>用于告知发送端可能发生拥塞，使用<span class="heti-skip"><span class="heti-spacing"> </span>ECN-echo<span class="heti-spacing"> </span></span>信号。</li>
<li><span>CWR<span class="heti-spacing"> </span></span>用于告知接收端发送速度已经放缓，可以停止发送<span class="heti-skip"><span class="heti-spacing"> </span>ECN-echo<span class="heti-spacing"> </span></span>信号。</li>
</ul>
<p><strong>URG</strong>：当<span class="heti-skip"><span class="heti-spacing"> </span>Urgent pointer (<span class="heti-spacing"> </span></span>表示紧急<span class="heti-skip"><span class="heti-spacing"> </span>byte<span class="heti-spacing"> </span></span>在数据中的偏移量<span class="heti-skip"><span class="heti-spacing"> </span>)<span class="heti-spacing"> </span></span>使用时置<span><span class="heti-spacing"> </span>1</span>，优先提交应用层。</p>
<p><strong>ACK</strong>：为<span class="heti-skip"><span class="heti-spacing"> </span>1<span class="heti-spacing"> </span></span>表示<span class="heti-skip"><span class="heti-spacing"> </span>acknowledgemnt number<span class="heti-spacing"> </span></span>有效，为<span class="heti-skip"><span class="heti-spacing"> </span>0<span class="heti-spacing"> </span></span>表示不接受<span class="heti-skip"><span class="heti-spacing"> </span>(<span class="heti-spacing"> </span></span>会忽略<span><span class="heti-spacing"> </span>)</span>。</p>
<p><strong>PSH</strong>：indicates PUSHed data. The receiver is hereby kindly requested to deliver the data to the application upon arrival and not buffer it until a full buffer.</p>
<p><strong>RST</strong>：is used to abruptly reset a connection that has become confused due to a host crash or some other reason. It is also used to reject an invalid segment or refuse an attempt to open a connection.</p>
<p><strong>SYN</strong>：用于建立链接。</p>
<ul>
<li>
<p>The connection request has <strong>SYN</strong> = 1 and <strong>ACK</strong>= 0.</p>
</li>
<li>
<p><strong>SYN</strong> = 1 and <strong>ACK</strong> = 1: the connection reply does bear an acknowledgement.</p>
</li>
<li>
<p>In essence, the <strong>SYN</strong> bit is used to denote both CONNECTION REQUEST and CONNECTION ACCEPTED, with the <strong>ACK</strong> bit used to distinguish between those two possibilities.</p>
</li>
</ul>
<p><strong>FIN</strong>：表示传输结束，再无数据需要传输。由于在关闭的过程中仍能传输，<span>SYN<span class="heti-spacing"> </span></span>和<span class="heti-skip"><span class="heti-spacing"> </span>FIN<span class="heti-spacing"> </span></span>均有序列号，确保能够正确处理<span><span class="heti-spacing"> </span>segments</span>。</p>
<p><span>Window Size<span class="heti-spacing"> </span></span>用于表示从确认的字节开始发送多少字节。为<span class="heti-skip"><span class="heti-spacing"> </span>0<span class="heti-spacing"> </span></span>表示接收方暂无法继续接收数据。</p>
<h4 id="connection-establish">connection establish</h4>
<p><img alt="image-20231128121740055" src="./计网.assets/image-20231128121740055.png" style="zoom:33%;"/></p>
<p>开始时<span><span class="heti-spacing"> </span>SYN = 1</span>，ACK = 0。上述即为三次握手建立链接的过程。</p>
<ol>
<li><span>establishing a connection<span class="heti-spacing"> </span></span>客户端发送请求，<span>TCP<span class="heti-spacing"> </span></span>包的数据段为<span><span class="heti-spacing"> </span>0</span>。<span>header<span class="heti-spacing"> </span></span>中有<span><span class="heti-spacing"> </span>Initial sequence number</span>、<span>SYN<span class="heti-spacing"> </span></span>置<span><span class="heti-spacing"> </span>1</span>、Maximum segment size、Receiving window size。</li>
<li>After receiving the request segment，服务器回复客户端。回函包含以下信息：Initial sequence number、Maximum segment size、Receiving window size、Acknowledgement number (SEQ + 1)，<span>SYN<span class="heti-spacing"> </span></span>和<span class="heti-skip"><span class="heti-spacing"> </span>ACK<span class="heti-spacing"> </span></span>均置<span><span class="heti-spacing"> </span>1</span>。</li>
<li>After receiving the reply segment。可选。发送一个纯粹的<span class="heti-skip"><span class="heti-spacing"> </span>ACK<span class="heti-spacing"> </span></span>数据包用于确认。</li>
</ol>
<p>有几点需要注意：</p>
<ul>
<li></li>
</ul>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: 密码学" class="md-footer__link md-footer__link--prev" href="../crypto/crypto.html">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</div>
<div class="md-footer__title">
<span class="md-footer__direction">
                Previous
              </span>
<div class="md-ellipsis">
                密码学
              </div>
</div>
</a>
<a aria-label="Next: 操作系统" class="md-footer__link md-footer__link--next" href="../OS/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F.html">
<div class="md-footer__title">
<span class="md-footer__direction">
                Next
              </span>
<div class="md-ellipsis">
                操作系统
              </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": ["navigation.top", "navigation.footer", "navigation.tracking", "navigation.tabs"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../../assets/javascripts/bundle.ad660dcc.min.js"></script>
<script src="../../format_more/javascripts/mathjax.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</body>
</html>